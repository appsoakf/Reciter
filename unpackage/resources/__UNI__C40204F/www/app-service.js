if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((o=>t.resolve(e()).then((()=>o))),(o=>t.resolve(e()).then((()=>{throw o}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...o){uni.__log__?uni.__log__(e,t,...o):console[e].apply(console,[...o,t])}const o="reciter_words";let a=null,n=0;const r=(e=!1)=>new Promise((a=>{try{const r=uni.getStorageSync(o);if(!r)return t("log","at services/word.js:27","æœ¬åœ°å­˜å‚¨ä¸­æ²¡æœ‰å•è¯æ•°æ®ï¼Œè¿”å›ç©ºæ•°ç»„"),e||i(0),void a([]);try{const o=JSON.parse(r);if(o&&"object"==typeof o&&!0===o.forceEmpty)return t("log","at services/word.js:38","æ£€æµ‹åˆ°forceEmptyæ ‡å¿—ï¼Œè¿”å›ç©ºæ•°ç»„"),e||i(0),void a([]);if(Array.isArray(o))return t("log","at services/word.js:47","è¯»å–åˆ°æ•°ç»„æ ¼å¼æ•°æ®ï¼Œé•¿åº¦:",o.length),e||i(o.length),void a(o);if(o&&"object"==typeof o&&Array.isArray(o.words))return t("log","at services/word.js:53","è¯»å–åˆ°å¯¹è±¡æ ¼å¼æ•°æ®ï¼Œwordsé•¿åº¦:",o.words.length),e||i(o.words.length),void a(o.words);t("warn","at services/word.js:60","å­˜å‚¨çš„æ•°æ®æ ¼å¼æ— æ³•è¯†åˆ«ï¼Œè¿”å›ç©ºæ•°ç»„"),e||i(0),a([])}catch(n){t("error","at services/word.js:64","è§£æå•è¯æ•°æ®å¤±è´¥:",n),e||i(0),a([])}}catch(r){t("error","at services/word.js:69","è·å–å•è¯åˆ—è¡¨å‡ºé”™:",r),e||i(0),a([])}})),s=()=>{try{const a=uni.getStorageSync(o);if(!a)return t("log","at services/word.js:87","åŒæ­¥æ–¹æ³•ï¼šæœ¬åœ°å­˜å‚¨ä¸­æ²¡æœ‰å•è¯æ•°æ®ï¼Œè¿”å›ç©ºæ•°ç»„"),[];try{const e=JSON.parse(a);return e&&"object"==typeof e&&!0===e.forceEmpty?(t("log","at services/word.js:96","åŒæ­¥æ–¹æ³•æ£€æµ‹åˆ°forceEmptyæ ‡å¿—ï¼Œè¿”å›ç©ºæ•°ç»„"),[]):Array.isArray(e)?(t("log","at services/word.js:103","åŒæ­¥æ–¹æ³•è¯»å–åˆ°æ•°ç»„æ ¼å¼æ•°æ®ï¼Œé•¿åº¦:",e.length),e):e&&"object"==typeof e&&Array.isArray(e.words)?(t("log","at services/word.js:107","åŒæ­¥æ–¹æ³•è¯»å–åˆ°å¯¹è±¡æ ¼å¼æ•°æ®ï¼Œwordsé•¿åº¦:",e.words.length),e.words):(t("warn","at services/word.js:112","åŒæ­¥æ–¹æ³•ï¼šå­˜å‚¨çš„æ•°æ®æ ¼å¼æ— æ³•è¯†åˆ«ï¼Œè¿”å›ç©ºæ•°ç»„"),[])}catch(e){return t("error","at services/word.js:115","è§£æå•è¯æ•°æ®å¤±è´¥:",e),[]}}catch(a){return t("error","at services/word.js:119","è·å–å•è¯åˆ—è¡¨å‡ºé”™:",a),[]}},l=e=>new Promise((a=>{const n="string"==typeof e?Number(e):e;try{const e=uni.getStorageSync(o);if(e)try{const o=JSON.parse(e);if(o&&"object"==typeof o&&!0===o.forceEmpty)return t("log","at services/word.js:141","getWordByIdæ£€æµ‹åˆ°forceEmptyæ ‡å¿—ï¼Œè¿”å›null"),void a(null)}catch(r){t("error","at services/word.js:146","è§£æå­˜å‚¨æ•°æ®å¤±è´¥:",r)}if(e)try{const t=JSON.parse(e),o=Array.isArray(t)?t:t&&Array.isArray(t.words)?t.words:null;if(o){const e=o.find((e=>e.id===n));if(e)return void a(e)}}catch(r){t("error","at services/word.js:168","è§£æå•è¯æ•°æ®å¤±è´¥:",r)}a(null)}catch(s){t("error","at services/word.js:175","è·å–å•è¯è¯¦æƒ…å‡ºé”™:",s),a(null)}})),i=e=>{if("undefined"!=typeof uni&&uni.$emit){if(a===e)return void t("log","at services/word.js:242","è·³è¿‡ç›¸åŒæ•°é‡çš„é€šçŸ¥:",e);const o=Date.now();if(o-n<300)return void t("log","at services/word.js:249","é€šçŸ¥é¢‘ç‡è¿‡é«˜ï¼Œè·³è¿‡æœ¬æ¬¡é€šçŸ¥");t("log","at services/word.js:253","å‘é€å•è¯æ•°é‡æ›´æ–°äº‹ä»¶ï¼Œå½“å‰æ•°é‡:",e),a=e,n=o,uni.$emit("words-count-updated",{count:e}),uni.$emit("global-data-updated")}},d=(e,a)=>(t("log","at services/word.js:307",`å‡†å¤‡æ›´æ–°IDä¸º${e}çš„å•è¯`,a),new Promise(((n,r)=>{try{const d=uni.getStorageSync(o);if(!d)return t("error","at services/word.js:314","æ›´æ–°å•è¯å¤±è´¥ï¼šæœªæ‰¾åˆ°æœ¬åœ°å­˜å‚¨çš„å•è¯æ•°æ®"),void r(new Error("æœªæ‰¾åˆ°æœ¬åœ°å­˜å‚¨çš„å•è¯æ•°æ®"));try{let i,c=JSON.parse(d),u=!1;if(Array.isArray(c))t("log","at services/word.js:327","æ£€æµ‹åˆ°æ—§æ ¼å¼å­˜å‚¨æ•°æ®ï¼ˆæ•°ç»„ï¼‰"),i=c;else{if(!c||"object"!=typeof c||!Array.isArray(c.words))return t("error","at services/word.js:334","æ›´æ–°å•è¯å¤±è´¥ï¼šæœªè¯†åˆ«çš„å­˜å‚¨æ•°æ®æ ¼å¼"),void r(new Error("æœªè¯†åˆ«çš„å­˜å‚¨æ•°æ®æ ¼å¼"));t("log","at services/word.js:330","æ£€æµ‹åˆ°æ–°æ ¼å¼å­˜å‚¨æ•°æ®ï¼ˆå¯¹è±¡åŒ…å«wordsæ•°ç»„ï¼‰"),i=c.words,u=!0}const p="string"==typeof e?parseInt(e,10):e;t("log","at services/word.js:341",`å¤„ç†çš„IDä¸º: ${p}ï¼Œç±»å‹: ${typeof p}`);const v=i.findIndex((e=>e.id===p));if(-1===v)return t("error","at services/word.js:346",`æ›´æ–°å•è¯å¤±è´¥ï¼šæ‰¾ä¸åˆ°IDä¸º${e}çš„å•è¯`),void r(new Error(`æ‰¾ä¸åˆ°IDä¸º${e}çš„å•è¯`));t("log","at services/word.js:351",`æ‰¾åˆ°IDä¸º${p}çš„å•è¯ï¼Œç´¢å¼•ä½ç½®: ${v}`);const g=i[v].id,m=i[v].name;let w;a.id=g,a.examples||(a.examples=[]),a.relatedWords||(a.relatedWords=[]),a.notes||(a.notes=[]),t("log","at services/word.js:363",`æ›´æ–°å•è¯: ${m} -> ${a.name}`),i[v]=a,u?(c.words=i,w=c):w=i,uni.setStorageSync(o,JSON.stringify(w)),t("log","at services/word.js:378","å·²å°†æ›´æ–°åçš„å•è¯ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨"),void 0!==uni.$wordIdCache&&(t("log","at services/word.js:383",`æ¸…é™¤IDä¸º${p}çš„å•è¯ç¼“å­˜`),uni.$wordIdCache&&uni.$wordIdCache[p]&&delete uni.$wordIdCache[p],t("log","at services/word.js:388","ä¸ºå®‰å…¨èµ·è§ï¼Œæ¸…ç©ºæ•´ä¸ªwordIdCache"),uni.$wordIdCache={}),void 0!==uni.$wordPreloadCache&&(t("log","at services/word.js:394","æ¸…é™¤å…¨å±€å•è¯é¢„åŠ è½½ç¼“å­˜"),uni.$wordPreloadCache={});try{t("log","at services/word.js:400","å°è¯•æ¸…é™¤é¡µé¢ç¼“å­˜"),uni.navigateBack({delta:0,success:()=>{t("log","at services/word.js:404","æˆåŠŸé‡æ–°åŠ è½½å½“å‰é¡µé¢")},fail:e=>{t("log","at services/word.js:407","é¡µé¢é‡æ–°åŠ è½½å¤±è´¥ï¼Œå¯èƒ½åœ¨éå¯¼èˆªä¸Šä¸‹æ–‡ä¸­:",e)}})}catch(s){t("log","at services/word.js:411","æ¸…é™¤é¡µé¢ç¼“å­˜å¤±è´¥ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œå¦‚æœä¸åœ¨å¯¼èˆªä¸Šä¸‹æ–‡ä¸­",s)}try{t("log","at services/word.js:416","å‘å‡ºå•è¯æ›´æ–°äº‹ä»¶é€šçŸ¥"),uni.$emit("word-updated",{id:p,word:a}),uni.$emit("words-count-updated"),uni.$emit("global-data-updated")}catch(l){t("error","at services/word.js:421","å‘å‡ºå•è¯æ›´æ–°äº‹ä»¶æ—¶å‡ºé”™:",l)}n(a)}catch(i){t("error","at services/word.js:426","è§£ææ•°æ®å¤±è´¥:",i),r(new Error("å•è¯æ•°æ®è§£æå¤±è´¥"))}}catch(d){t("error","at services/word.js:430","æ›´æ–°å•è¯æ—¶å‡ºé”™:",d,d.stack),r(d)}}))),c=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,5),u=(e,o="YYYY-MM-DD HH:mm:ss")=>{if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0"),s=t.getHours().toString().padStart(2,"0"),l=t.getMinutes().toString().padStart(2,"0"),i=t.getSeconds().toString().padStart(2,"0");return o.replace("YYYY",a).replace("MM",n).replace("DD",r).replace("HH",s).replace("mm",l).replace("ss",i)}catch(a){return t("error","at utils/common.js:41","æ—¥æœŸæ ¼å¼åŒ–é”™è¯¯:",a),""}},p="reciter_errorbook",v=()=>new Promise((e=>{try{const a=uni.getStorageSync(p);if(!a)return t("log","at services/errorbook.js:24","æœ¬åœ°å­˜å‚¨ä¸­æ²¡æœ‰é”™è¯¯è®°å½•æ•°æ®ï¼Œè¿”å›ç©ºæ•°ç»„"),void e([]);try{const o=JSON.parse(a);if(Array.isArray(o)){t("log","at services/errorbook.js:34","è¯»å–åˆ°é”™è¯¯è®°å½•æ•°æ®ï¼Œé•¿åº¦:",o.length);const a=o.map((e=>({id:e.id,content:e.content||e.title||"",translation:e.translation||e.desc||"",word:e.word||"",note:e.note||"",createTime:e.createTime||e.date||(new Date).toISOString(),updateTime:e.updateTime||null})));return t("log","at services/errorbook.js:54","æ•°æ®æ ¼å¼æ ‡å‡†åŒ–å®Œæˆï¼Œè¿”å›é”™è¯¯è®°å½•"),void e(a)}t("warn","at services/errorbook.js:60","å­˜å‚¨çš„é”™è¯¯è®°å½•æ•°æ®æ ¼å¼æ— æ³•è¯†åˆ«ï¼Œè¿”å›ç©ºæ•°ç»„"),e([])}catch(o){t("error","at services/errorbook.js:63","è§£æé”™è¯¯è®°å½•æ•°æ®å¤±è´¥:",o),e([])}}catch(a){t("error","at services/errorbook.js:67","è·å–é”™è¯¯è®°å½•åˆ—è¡¨å¤±è´¥:",a),e([])}})),g=()=>{try{const o=uni.getStorageSync(p);if(!o)return t("log","at services/errorbook.js:84","åŒæ­¥æ–¹æ³•ï¼šæœ¬åœ°å­˜å‚¨ä¸­æ²¡æœ‰é”™è¯¯è®°å½•æ•°æ®ï¼Œè¿”å›ç©ºæ•°ç»„"),[];try{const e=JSON.parse(o);if(Array.isArray(e)){t("log","at services/errorbook.js:93","åŒæ­¥æ–¹æ³•è¯»å–åˆ°é”™è¯¯è®°å½•æ•°æ®ï¼Œé•¿åº¦:",e.length);return e.map((e=>({id:e.id,content:e.content||e.title||"",translation:e.translation||e.desc||"",word:e.word||"",note:e.note||"",createTime:e.createTime||e.date||(new Date).toISOString(),updateTime:e.updateTime||null})))}return t("warn","at services/errorbook.js:117","åŒæ­¥æ–¹æ³•ï¼šå­˜å‚¨çš„é”™è¯¯è®°å½•æ•°æ®æ ¼å¼æ— æ³•è¯†åˆ«ï¼Œè¿”å›ç©ºæ•°ç»„"),[]}catch(e){return t("error","at services/errorbook.js:120","è§£æé”™è¯¯è®°å½•æ•°æ®å¤±è´¥:",e),[]}}catch(o){return t("error","at services/errorbook.js:124","è·å–é”™è¯¯è®°å½•åˆ—è¡¨å¤±è´¥:",o),[]}},m=e=>{try{const o=getCurrentPages(),a=o[o.length-1];if(a){const t=a.onLoad;a.onLoad=function(o){"function"==typeof t&&t.call(this,o),e(o)}}else t("warn","at utils/uni-hooks.js:23","onLoad: æ— æ³•è·å–å½“å‰é¡µé¢å®ä¾‹"),setTimeout((()=>{t("log","at utils/uni-hooks.js:27","onLoad: ä½¿ç”¨setTimeoutæ¨¡æ‹Ÿ"),e({})}),100)}catch(o){t("error","at utils/uni-hooks.js:32","onLoadé€‚é…å™¨é”™è¯¯:",o)}},w=e=>{try{const o=getCurrentPages(),a=o[o.length-1];if(a){const t=a.onShow;a.onShow=function(){"function"==typeof t&&t.call(this),e()}}else t("warn","at utils/uni-hooks.js:52","onShow: æ— æ³•è·å–å½“å‰é¡µé¢å®ä¾‹")}catch(o){t("error","at utils/uni-hooks.js:55","onShowé€‚é…å™¨é”™è¯¯:",o)}},h=e=>{try{const o=getCurrentPages(),a=o[o.length-1];if(a){const t=a.onHide;a.onHide=function(){"function"==typeof t&&t.call(this),e()}}else t("warn","at utils/uni-hooks.js:75","onHide: æ— æ³•è·å–å½“å‰é¡µé¢å®ä¾‹")}catch(o){t("error","at utils/uni-hooks.js:78","onHideé€‚é…å™¨é”™è¯¯:",o)}},x=e=>{try{const o=getCurrentPages(),a=o[o.length-1];if(a){const t=a.onUnload;a.onUnload=function(){"function"==typeof t&&t.call(this),e()}}else t("warn","at utils/uni-hooks.js:98","onUnload: æ— æ³•è·å–å½“å‰é¡µé¢å®ä¾‹")}catch(o){t("error","at utils/uni-hooks.js:101","onUnloadé€‚é…å™¨é”™è¯¯:",o)}},f={__name:"index",setup(o){const a=e.ref(0),n=e.ref(0),l=e.ref({width:375,height:667,pixelRatio:2,platform:"ios",orientation:"portrait"});e.computed((()=>{const{width:e,orientation:t}=l.value;return e<360?"device-small":e<768?"portrait"===t?"device-phone":"device-phone-landscape":e<1024?"device-tablet":"device-desktop"})),e.computed((()=>{const{width:e}=l.value;return e<360?"small":e<768?"medium":"large"})),e.computed((()=>{const{width:e,orientation:t}=l.value;return"landscape"===t?e<568?2:4:e<375?1:e<768?2:4}));const i=e=>{["/pages/index/index","/pages/wordlist/index","/pages/add/index","/pages/errorbook/index"].includes(e)?uni.switchTab({url:e}):uni.navigateTo({url:e})},d=async()=>{try{t("log","at pages/index/index.vue:153","åŠ è½½å•è¯åˆ—è¡¨æ•°é‡..."),void 0!==uni.$wordPreloadCache&&(uni.$wordPreloadCache={});const e=await r(!0);Array.isArray(e)?(a.value=e.length,t("log","at pages/index/index.vue:164","è·å–åˆ°å•è¯æ•°é‡:",a.value)):(t("warn","at pages/index/index.vue:166","è·å–åˆ°çš„å•è¯æ•°æ®æ ¼å¼å¼‚å¸¸"),a.value=0)}catch(e){t("error","at pages/index/index.vue:170","è·å–å•è¯æ•°é‡å¤±è´¥:",e),a.value=0}},c=async()=>{try{t("log","at pages/index/index.vue:177","å¼€å§‹åŠ è½½é”™é¢˜æœ¬æ•°é‡");const e=await v();t("log","at pages/index/index.vue:179","è·å–åˆ°é”™é¢˜æ•°æ®:",JSON.stringify(e)),Array.isArray(e)?(n.value=e.length,t("log","at pages/index/index.vue:183","è®¾ç½®é”™é¢˜æ•°é‡ä¸º:",n.value)):(t("warn","at pages/index/index.vue:185","è·å–åˆ°çš„é”™é¢˜æ•°æ®ä¸æ˜¯æ•°ç»„"),n.value=0)}catch(e){t("error","at pages/index/index.vue:189","è·å–é”™é¢˜æ•°é‡å¤±è´¥:",e),n.value=0}},u=()=>{(()=>{try{const e=uni.getSystemInfoSync();t("log","at pages/index/index.vue:198","ç³»ç»Ÿä¿¡æ¯:",e);const o=e.windowWidth>e.windowHeight?"landscape":"portrait";l.value={width:e.windowWidth,height:e.windowHeight,pixelRatio:e.pixelRatio,platform:e.platform,orientation:o},t("log","at pages/index/index.vue:210","çª—å£å°ºå¯¸:",l.value)}catch(e){t("error","at pages/index/index.vue:212","è·å–ç³»ç»Ÿä¿¡æ¯å¤±è´¥:",e)}})(),d(),c()};return e.onMounted((()=>{u(),uni.$on("errorbook-count-updated",(e=>{t("log","at pages/index/index.vue:271","æ¥æ”¶åˆ°é”™é¢˜æœ¬è®¡æ•°æ›´æ–°äº‹ä»¶:",e),e&&"number"==typeof e.count&&(n.value=e.count,t("log","at pages/index/index.vue:274","é¦–é¡µé”™é¢˜æœ¬è®¡æ•°å·²æ›´æ–°ä¸º:",n.value))})),uni.$on("words-count-updated",(e=>{if(t("log","at pages/index/index.vue:280","æ¥æ”¶åˆ°å•è¯æ•°é‡æ›´æ–°äº‹ä»¶:",e),e&&"number"==typeof e.count)a.value=e.count,t("log","at pages/index/index.vue:285","é¦–é¡µå•è¯æ•°é‡å·²ç›´æ¥æ›´æ–°ä¸º:",a.value);else{t("log","at pages/index/index.vue:288","äº‹ä»¶æ²¡æœ‰æä¾›countå€¼ï¼Œæ‰‹åŠ¨åŠ è½½å•è¯æ•°é‡");try{const e=s();Array.isArray(e)&&(a.value=e.length,t("log","at pages/index/index.vue:294","æ‰‹åŠ¨åŠ è½½çš„å•è¯æ•°é‡:",a.value))}catch(o){t("error","at pages/index/index.vue:297","æ‰‹åŠ¨åŠ è½½å•è¯æ•°é‡å¤±è´¥:",o)}}}))})),w((()=>{d(),c()})),e.onBeforeUnmount((()=>{uni.$off("errorbook-count-updated"),uni.$off("words-count-updated")})),(t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"feature-cards"},[e.createElementVNode("view",{class:"card-row"},[e.createElementVNode("view",{class:"card",onClick:o[0]||(o[0]=e=>i("/pages/wordlist/index"))},[e.createElementVNode("view",{class:"card-icon"},[e.createElementVNode("text",{class:"iconfont icon-list"},"ğŸ“‹")]),e.createElementVNode("view",{class:"card-title"},"å•è¯åˆ—è¡¨"),e.createElementVNode("view",{class:"card-desc"},"å…±æœ‰å•è¯ï¼š"+e.toDisplayString(a.value)+"ä¸ª",1)]),e.createElementVNode("view",{class:"card",onClick:o[1]||(o[1]=e=>i("/pages/errorbook/index"))},[e.createElementVNode("view",{class:"card-icon"},[e.createElementVNode("text",{class:"iconfont icon-book"},"ğŸ“š")]),e.createElementVNode("view",{class:"card-title"},"é”™é¢˜æœ¬"),e.createElementVNode("view",{class:"card-desc"},"è®°å½•çŸ¥è¯†ç‚¹ï¼š"+e.toDisplayString(n.value)+"ä¸ª",1)])]),e.createElementVNode("view",{class:"card-row"},[e.createElementVNode("view",{class:"card",onClick:o[2]||(o[2]=e=>i("/pages/add/index"))},[e.createElementVNode("view",{class:"card-icon"},[e.createElementVNode("text",{class:"iconfont icon-add"},"â•")]),e.createElementVNode("view",{class:"card-title"},"æ·»åŠ å•è¯"),e.createElementVNode("view",{class:"card-desc"},"è‡ªå®šä¹‰æ·»åŠ æ–°å•è¯")]),e.createElementVNode("view",{class:"card",onClick:o[3]||(o[3]=e=>i("/pages/settings/index"))},[e.createElementVNode("view",{class:"card-icon"},[e.createElementVNode("text",{class:"iconfont icon-settings"},"âš™ï¸")]),e.createElementVNode("view",{class:"card-title"},"è®¾ç½®"),e.createElementVNode("view",{class:"card-desc"},"è‡ªå®šä¹‰åº”ç”¨è®¾ç½®")])])])]))}},y="/static/images/empty.png",k=(e,t)=>{const o=e.__vccOpts||e;for(const[a,n]of t)o[a]=n;return o},E=k({__name:"LoadingError",props:{show:{type:Boolean,default:!1},message:{type:String,default:"æ•°æ®åŠ è½½å¤±è´¥"}},emits:["retry","dismiss"],setup(o,{emit:a}){const n=o,r=a,s=e.ref(0),l=e.ref(null);e.watch((()=>n.show),(e=>{e?(t("log","at components/LoadingError.vue:36","é”™è¯¯æ˜¾ç¤ºï¼Œå°†åœ¨3ç§’åè‡ªåŠ¨é‡è¯•"),i()):(d(),s.value=0)}));const i=()=>{d(),s.value<2&&(l.value=setTimeout((()=>{c()}),3e3))},d=()=>{l.value&&(clearTimeout(l.value),l.value=null)},c=e=>{t("log","at components/LoadingError.vue:61","æ‰§è¡Œé‡è¯•æ“ä½œï¼Œé‡è¯•æ¬¡æ•°:",s.value+1),s.value++,e&&e.stopPropagation(),r("retry"),s.value<2&&i()},u=e=>{t("log","at components/LoadingError.vue:79","ç”¨æˆ·é€‰æ‹©ç»§ç»­ä½¿ç”¨åº”ç”¨ï¼Œå¿½ç•¥é”™è¯¯"),d(),e&&e.stopPropagation(),r("dismiss")};return e.onMounted((()=>{n.show&&i()})),(t,a)=>o.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:"error-container",onClick:c},[e.createElementVNode("view",{class:"error-icon"},[e.createElementVNode("text",{class:"iconfont icon-warning"})]),e.createElementVNode("view",{class:"error-text"},e.toDisplayString(o.message),1),e.createElementVNode("view",{class:"error-retry"},"ç‚¹å‡»å±å¹•é‡è¯•"),e.createElementVNode("view",{class:"error-continue",onClick:e.withModifiers(u,["stop"])},"ç»§ç»­ä½¿ç”¨åº”ç”¨")])):e.createCommentVNode("",!0)}},[["__scopeId","data-v-71f6a818"]]),N={__name:"index",setup(o){const a=e.ref([]),n=e.ref(!1),s=e.ref(!1),l=e.ref("æ•°æ®åŠ è½½å¤±è´¥"),i=e.ref("normal"),d=e.ref(""),c=e.ref(null),u=e.computed((()=>{if(!d.value)return a.value;const e=d.value.toLowerCase();return e.trim()?a.value.filter((t=>t.name.toLowerCase().includes(e)||t.meaning.includes(e))):a.value})),p=e.computed((()=>{if(x===v()&&g)return g;const e={};u.value.forEach((t=>{const o=t.name.charAt(0).toUpperCase();e[o]||(e[o]=[]),e[o].push(t)}));const t=Object.keys(e).sort().reduce(((t,o)=>(t[o]=e[o],t)),{});return g=t,x=v(),t})),v=()=>`${u.value.length}_${d.value}`;let g=null,x="";const f=e.computed((()=>{const e=Object.keys(p.value);return e.length>0?e:["A"]})),k=e.ref(""),N=e.ref(""),V=e.ref(!1);let b=null,C=null;const S=e=>{C||(C=setTimeout((()=>{C=null}),100))},T=e=>{const t=e.detail.value;c.value&&clearTimeout(c.value),c.value=setTimeout((()=>{d.value=t,x="",g=null,c.value=null}),300)},B=()=>{d.value=""},D=e=>{const o="string"==typeof e?parseInt(e,10):e;if(isNaN(o))return t("error","at pages/wordlist/index.vue:327","è·³è½¬å¤±è´¥: æ— æ•ˆID"),void uni.showToast({title:"æ— æ³•åŠ è½½å•è¯è¯¦æƒ…",icon:"none"});const a=`/pages/worddetail/index?id=${o}`;t("log","at pages/wordlist/index.vue:337","è·³è½¬URL:",a);try{uni.navigateTo({url:a,success:()=>{t("log","at pages/wordlist/index.vue:343","æˆåŠŸè·³è½¬åˆ°å•è¯è¯¦æƒ…é¡µ, ID:",o)},fail:e=>{t("error","at pages/wordlist/index.vue:346","è·³è½¬å¤±è´¥:",e),uni.showToast({title:"é¡µé¢è·³è½¬å¤±è´¥",icon:"none"}),setTimeout((()=>{t("log","at pages/wordlist/index.vue:354","å°è¯•ä½¿ç”¨redirectToæ–¹å¼è·³è½¬"),uni.redirectTo({url:a,success:()=>t("log","at pages/wordlist/index.vue:357","redirectToæˆåŠŸ"),fail:e=>t("error","at pages/wordlist/index.vue:358","redirectToä¹Ÿå¤±è´¥:",e)})}),500)}})}catch(n){t("error","at pages/wordlist/index.vue:364","è·³è½¬å¼‚å¸¸:",n),uni.showToast({title:"è·³è½¬å‡ºé”™",icon:"none"})}},A=()=>{if(n.value)t("log","at pages/wordlist/index.vue:375","åŠ è½½æ“ä½œæ­£åœ¨è¿›è¡Œä¸­ï¼Œè·³è¿‡é‡å¤åŠ è½½");else try{n.value=!0,0===a.value.length&&uni.showLoading({title:"åŠ è½½ä¸­...",mask:!0}),g=null,x="",$(),r(!0).then((e=>{a.value=e,x="",g=null,e.length>0?t("log","at pages/wordlist/index.vue:408","æˆåŠŸåŠ è½½å•è¯æ•°æ®ï¼Œæ•°é‡:",e.length):t("log","at pages/wordlist/index.vue:410","å•è¯åˆ—è¡¨ä¸ºç©º"),uni.hideLoading(),n.value=!1})).catch((e=>{t("error","at pages/wordlist/index.vue:416","è·å–å•è¯åˆ—è¡¨å‡ºé”™:",e),uni.hideLoading(),n.value=!1}))}catch(e){t("error","at pages/wordlist/index.vue:422","åŠ è½½å•è¯åˆ—è¡¨æ•°æ®é”™è¯¯:",e),uni.hideLoading(),n.value=!1}},I=()=>{t("log","at pages/wordlist/index.vue:430","ç”¨æˆ·ç‚¹å‡»é‡è¯•"),s.value=!1,A()},j=()=>{t("log","at pages/wordlist/index.vue:437","ç”¨æˆ·é€‰æ‹©ç»§ç»­ä½¿ç”¨åº”ç”¨"),s.value=!1};w((()=>{t("log","at pages/wordlist/index.vue:443","å•è¯åˆ—è¡¨é¡µé¢æ˜¾ç¤º"),A()})),m((e=>{e&&"select"===e.mode&&(i.value="select"),setTimeout((()=>{n.value||0!==a.value.length||r().then((e=>{Array.isArray(e)&&e.length>0?(a.value=e,t("log","at pages/wordlist/index.vue:462","é¢„åŠ è½½å®Œæˆï¼Œæ•°æ®æ•°é‡:",e.length)):t("log","at pages/wordlist/index.vue:464","é¢„åŠ è½½å®Œæˆï¼Œæ•°æ®ä¸ºç©ºï¼Œä¿æŒç©ºåˆ—è¡¨çŠ¶æ€")})).catch((e=>{t("error","at pages/wordlist/index.vue:467","é¢„åŠ è½½å‡ºé”™:",e)}))}),50),setTimeout((()=>{A()}),300)}));const $=()=>{void 0!==uni.$wordPreloadCache&&(t("log","at pages/wordlist/index.vue:481","æ¸…ç†å…¨å±€å•è¯é¢„åŠ è½½ç¼“å­˜"),uni.$wordPreloadCache={})};return e.onUnmounted((()=>{t("log","at pages/wordlist/index.vue:488","å•è¯åˆ—è¡¨é¡µé¢å¸è½½"),"undefined"!=typeof window&&window.removeEventListener("error",errorHandler,!0),uni.$off("refreshWordList"),b&&clearTimeout(b),C&&clearTimeout(C),c.value&&clearTimeout(c.value),g=null,$()})),h((()=>{t("log","at pages/wordlist/index.vue:511","å•è¯åˆ—è¡¨é¡µé¢éšè—"),$()})),e.onMounted((()=>{if(t("log","at pages/wordlist/index.vue:516","å•è¯åˆ—è¡¨é¡µé¢å·²æŒ‚è½½"),uni.$on("refreshWordList",(e=>{t("log","at pages/wordlist/index.vue:520","æ¥æ”¶åˆ°åˆ·æ–°å•è¯åˆ—è¡¨äº‹ä»¶:",e),a.value=[],A()})),"undefined"!=typeof window){const o=e=>(t("error","at pages/wordlist/index.vue:529","æ•è·åˆ°é¡µé¢é”™è¯¯:",e.message),e.preventDefault(),s.value||(uni.showToast({title:"å‘ç”Ÿäº†ä¸€äº›é—®é¢˜ï¼Œæ­£åœ¨æ¢å¤...",icon:"none",duration:2e3}),0===a.value.length&&e.message&&!e.message.includes("forceEmpty")&&t("log","at pages/wordlist/index.vue:543","å°è¯•æ¢å¤åŸºæœ¬åŠŸèƒ½ï¼Œä½†ä¸è‡ªåŠ¨å¡«å……é»˜è®¤å•è¯")),!0);window.addEventListener("error",o,!0),e.onUnmounted((()=>{"undefined"!=typeof window&&window.removeEventListener("error",o,!0),uni.$off("refreshWordList"),b&&clearTimeout(b),C&&clearTimeout(C),c.value&&clearTimeout(c.value),g=null}))}0!==a.value.length||n.value||A()})),(o,a)=>(e.openBlock(),e.createElementBlock("view",{class:"container"},["select"===i.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"select-tip"}," ç‚¹å‡»å•è¯è¿›è¡Œé€‰æ‹© ")):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"content-container"},[e.createElementVNode("view",{class:"search-bar"},[e.createElementVNode("view",{class:"search-box"},[e.createElementVNode("text",{class:"iconfont icon-search"}),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),placeholder:"æœç´¢å•è¯",onInput:T},null,544),[[e.vModelText,d.value]]),d.value?(e.openBlock(),e.createElementBlock("text",{key:0,class:"iconfont icon-close",onClick:B})):e.createCommentVNode("",!0)])]),e.createElementVNode("scroll-view",{class:"word-list","scroll-y":"","scroll-into-view":N.value,onScroll:S,"scroll-with-animation":!0,"enable-back-to-top":!0,"show-scrollbar":!0,"refresher-enabled":!1},[u.value.length>0?(e.openBlock(),e.createElementBlock("view",{key:0},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,((o,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,id:"letter-"+a},[e.createElementVNode("view",{class:"letter-title"},e.toDisplayString(a),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o,((o,a)=>(e.openBlock(),e.createElementBlock("view",{key:o.id,class:"word-item",onClick:e=>(e=>{if("select"===i.value){const t={id:e.id,name:e.name,pos:e.pos},o=getCurrentPages(),a=o[o.length-2];return a&&"pages/add/index"===a.route&&a.$vm.formData.relatedWords.push(t),void uni.navigateBack()}t("log","at pages/wordlist/index.vue:294","ç‚¹å‡»å•è¯:",e.name),t("log","at pages/wordlist/index.vue:297","å‡†å¤‡è·³è½¬åˆ°å•è¯è¯¦æƒ…é¡µ, ID:",e.id,"ç±»å‹:",typeof e.id),void 0===uni.$wordPreloadCache&&(uni.$wordPreloadCache={}),uni.$wordPreloadCache[e.id]=e;const o=parseInt(e.id,10);if(t("log","at pages/wordlist/index.vue:307","è½¬æ¢åçš„ID:",o,"ç±»å‹:",typeof o),isNaN(o))return t("error","at pages/wordlist/index.vue:311","æ— æ•ˆIDï¼Œæ— æ³•è·³è½¬"),void uni.showToast({title:"æ— æ•ˆçš„å•è¯ID",icon:"none"});D(o)})(o)},[e.createElementVNode("view",{class:"word-name"},e.toDisplayString(o.name),1),e.createElementVNode("view",{class:"word-meaning"},[e.createElementVNode("text",{class:"word-pos"},e.toDisplayString(o.pos),1),e.createTextVNode(" "+e.toDisplayString(o.meaning),1)])],8,["onClick"])))),128))],8,["id"])))),128))])):0!==u.value.length||d.value?0===u.value.length&&d.value?(e.openBlock(),e.createElementBlock("view",{key:2,class:"empty-result"},[e.createElementVNode("image",{src:y,mode:"aspectFit"}),e.createElementVNode("text",null,"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å•è¯"),e.createElementVNode("button",{class:"small-btn",onClick:B},"æ¸…é™¤æœç´¢")])):e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:1,class:"empty-result"},[e.createElementVNode("image",{src:y,mode:"aspectFit"}),e.createElementVNode("text",null,"å•è¯åˆ—è¡¨ä¸ºç©º"),e.createElementVNode("text",{class:"empty-tip"},"æ‚¨å·²æ¸…ç©ºæ•°æ®ï¼Œå•è¯åˆ—è¡¨ä¸ºç©º")]))],40,["scroll-into-view"])]),e.createElementVNode("view",{class:"letter-index"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:e.normalizeClass(["letter-item",{active:k.value===t}]),onClick:e=>(e=>{b&&clearTimeout(b),C&&clearTimeout(C),k.value=e,N.value="letter-"+e,V.value=!0,b=setTimeout((()=>{V.value=!1}),800)})(t)},e.toDisplayString(t),11,["onClick"])))),128))]),V.value?(e.openBlock(),e.createElementBlock("view",{key:1,class:"letter-tip"},e.toDisplayString(k.value),1)):e.createCommentVNode("",!0),e.createVNode(E,{show:s.value,message:l.value,onRetry:I,onDismiss:j},null,8,["show","message"])]))}},V=k({__name:"index",setup(a){const n=e.ref(!1),r=e.ref(null),c=e.reactive({name:"",pos:[],meaning:"",examples:[],notes:[]}),u=()=>{c.name="",c.pos=[],c.meaning="",c.examples=[],c.notes=[],n.value=!1,r.value=null,setTimeout((()=>{t("log","at pages/add/index.vue:187","è¡¨å•å·²å®Œå…¨é‡ç½®")}),0)},p=e.computed((()=>c.pos.join("/"))),v=[{label:"adj.",text:"å½¢å®¹è¯",value:"adj."},{label:"adv.",text:"å‰¯è¯",value:"adv."},{label:"n.",text:"åè¯",value:"n."},{label:"v.",text:"åŠ¨è¯",value:"v."},{label:"prep.",text:"ä»‹è¯",value:"prep."},{label:"conj.",text:"è¿è¯",value:"conj."},{label:"pron.",text:"ä»£è¯",value:"pron."},{label:"num.",text:"æ•°è¯",value:"num."},{label:"art.",text:"å† è¯",value:"art."}],g=()=>{const e=new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},h=()=>{c.examples.push({en:"",zh:""})},f=()=>{c.notes||(c.notes=[]),c.notes.push("")},y=async()=>{var e;if(c.name.trim())if(0!==c.pos.length)if(c.meaning.trim())try{uni.showLoading({title:"ä¿å­˜ä¸­..."});const a={name:c.name.trim(),pos:p.value,meaning:c.meaning.trim(),examples:c.examples.filter((e=>e.en.trim()||e.zh.trim())),notes:c.notes.filter((e=>e.trim()))};n.value&&r.value?(a.id=r.value,await d(r.value,a),uni.hideLoading(),uni.showToast({title:"ä¿®æ”¹æˆåŠŸ",icon:"success"})):(await(e=a,new Promise((a=>{try{let t=s();const n={id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1,...e},r=[...t,n];uni.setStorageSync(o,JSON.stringify(r)),i(r.length),a(r)}catch(n){t("error","at services/word.js:295","æ·»åŠ å•è¯å‡ºé”™:",n),a([])}}))),uni.hideLoading(),uni.showToast({title:"æ·»åŠ æˆåŠŸ",icon:"success"})),uni.$emit("refreshWordList"),u(),setTimeout((()=>{uni.switchTab({url:"/pages/wordlist/index"})}),1500)}catch(a){uni.hideLoading(),t("error","at pages/add/index.vue:326","ä¿å­˜å•è¯å¤±è´¥:",a),uni.showToast({title:"ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}else uni.showToast({title:"è¯·è¾“å…¥ä¸­æ–‡é‡Šä¹‰",icon:"none"});else uni.showToast({title:"è¯·é€‰æ‹©è¯æ€§",icon:"none"});else uni.showToast({title:"è¯·è¾“å…¥å•è¯",icon:"none"})},k=()=>{try{const e=getApp();if(e&&e.globalData){const{editWordId:o,editMode:a}=e.globalData;if("edit"===a&&o)return t("log","at pages/add/index.vue:342","ä»å…¨å±€å˜é‡è·å–ç¼–è¾‘å‚æ•°:",o,a),n.value=!0,r.value=o,e.globalData.editWordId=null,e.globalData.editMode=null,E(o),!0}return!1}catch(e){return t("error","at pages/add/index.vue:359","è·å–å…¨å±€ç¼–è¾‘å‚æ•°å¤±è´¥:",e),!1}},E=async e=>{try{uni.showLoading({title:"åŠ è½½ä¸­..."});const t=await l(e);t?(c.name=t.name||"",c.meaning=t.meaning||"","string"==typeof t.pos?c.pos=t.pos.split("/").filter(Boolean):Array.isArray(t.pos)?c.pos=[...t.pos]:c.pos=[],t.examples&&Array.isArray(t.examples)?c.examples=[...t.examples]:c.examples=[],t.notes&&Array.isArray(t.notes)?c.notes=[...t.notes]:c.notes=[],uni.hideLoading()):(uni.hideLoading(),uni.showToast({title:"å•è¯ä¸å­˜åœ¨",icon:"none"}),setTimeout((()=>{uni.navigateBack()}),1500))}catch(o){uni.hideLoading(),t("error","at pages/add/index.vue:413","åŠ è½½å•è¯è¯¦æƒ…å¤±è´¥:",o),uni.showToast({title:"åŠ è½½å¤±è´¥",icon:"none"})}};m((e=>{try{t("log","at pages/add/index.vue:424","é¡µé¢åŠ è½½å‚æ•°:",e),void 0!==uni.$wordPreloadCache&&(t("log","at pages/add/index.vue:428","æ¸…ç†å•è¯é¢„åŠ è½½ç¼“å­˜"),uni.$wordPreloadCache={}),u();try{const e=plus.webview.currentWebview();e&&(e.setStyle({cachemode:"noCache"}),t("log","at pages/add/index.vue:443","è®¾ç½®APPé¡µé¢ä¸ç¼“å­˜"))}catch(o){t("error","at pages/add/index.vue:447","è®¾ç½®é¡µé¢ä¸ç¼“å­˜å¤±è´¥:",o)}const a=(()=>{const e=getCurrentPages();if(e.length<=1)return"tabbar";const t=e[e.length-2];return t&&t.route?t.route.includes("wordlist")?"wordlist":t.route:"unknown"})();t("log","at pages/add/index.vue:471","å¯¼èˆªæ¥æº:",a),"wordlist"!==a&&"tabbar"!==a||setTimeout((()=>{t("log","at pages/add/index.vue:477","æ‰§è¡Œç‰¹æ®Šæ¥æºé¡µé¢æ¸²æŸ“ä¿®å¤"),V(),setTimeout(b,300),setTimeout(b,600)}),200);try{const e=getCurrentPages(),o=e[e.length-1];if(o&&"function"==typeof o.$getAppWebview){const e=o.$getAppWebview();e&&"function"==typeof e.setStyle&&(e.setStyle({disableScroll:!1,cachemode:"noCache"}),t("log","at pages/add/index.vue:500","æˆåŠŸè®¾ç½®é¡µé¢ä¸ç¼“å­˜"))}}catch(o){t("error","at pages/add/index.vue:504","è®¾ç½®é¡µé¢ä¸ç¼“å­˜å¤±è´¥:",o)}e.id&&"edit"===e.mode?(n.value=!0,r.value=Number(e.id),E(Number(e.id))):k(),setTimeout((()=>{N()}),300)}catch(a){t("error","at pages/add/index.vue:523","å¤„ç†é¡µé¢å‚æ•°å¤±è´¥:",a)}}));const N=()=>{t("log","at pages/add/index.vue:529","æ£€æŸ¥è¡¨å•æ¸²æŸ“")},V=()=>{t("log","at pages/add/index.vue:568","æ‰§è¡Œé¡µé¢å¼ºåˆ¶åˆ·æ–°");const e={name:c.name,pos:[...c.pos],meaning:c.meaning,examples:JSON.parse(JSON.stringify(c.examples)),notes:c.notes?[...c.notes]:[]};u(),setTimeout((()=>{c.name=e.name,c.pos=e.pos,c.meaning=e.meaning,c.examples=e.examples,c.notes=e.notes,t("log","at pages/add/index.vue:590","é¡µé¢å·²åˆ·æ–°å¹¶æ¢å¤æ•°æ®"),setTimeout((()=>{}),50)}),100)},b=()=>{};return w((()=>{t("log","at pages/add/index.vue:703","é¡µé¢æ˜¾ç¤º"),n.value||(u(),k()),setTimeout((()=>{N();const e=()=>{try{b()}catch(e){t("error","at pages/add/index.vue:734","é‡ç½®æ–‡æœ¬æ¡†é«˜åº¦å¤±è´¥:",e)}};getCurrentPages().length<=1&&(t("log","at pages/add/index.vue:747","æ£€æµ‹åˆ°å¯èƒ½æ˜¯tabBarå¯¼èˆªï¼Œæ‰§è¡Œç‰¹æ®Šä¿®å¤"),setTimeout(V,100)),e(),setTimeout(e,300),setTimeout(e,800)}),100)})),e.onMounted((()=>{t("log","at pages/add/index.vue:762","ç»„ä»¶å·²æŒ‚è½½"),setTimeout((()=>{N()}),100)})),e.onUnmounted((()=>{t("log","at pages/add/index.vue:772","ç»„ä»¶å¸è½½ï¼Œæ¸…ç†æ•°æ®"),u()})),x((()=>{t("log","at pages/add/index.vue:779","é¡µé¢å¸è½½ï¼Œæ¸…ç†æ•°æ®"),u()})),(t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"form-group"},[e.createElementVNode("view",{class:"label-row"},[e.createElementVNode("text",{class:"required"},"*"),e.createElementVNode("text",{class:"label-text"},"å•è¯")]),e.createElementVNode("view",{class:"input-container"},[e.withDirectives(e.createElementVNode("input",{type:"text",class:"word-input","onUpdate:modelValue":o[0]||(o[0]=e=>c.name=e),placeholder:"è¾“å…¥å•è¯"},null,512),[[e.vModelText,c.name]]),e.createElementVNode("text",{class:"time"},e.toDisplayString(g()),1)])]),e.createElementVNode("view",{class:"form-group"},[e.createElementVNode("view",{class:"label-row"},[e.createElementVNode("text",{class:"required"},"*"),e.createElementVNode("text",{class:"label-text"},"è¯æ€§")]),e.createElementVNode("view",{class:"pos-selection"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(v,((t,o)=>e.createElementVNode("view",{key:o,class:e.normalizeClass(["pos-item",{active:c.pos.includes(t.value)}]),onClick:e=>(e=>{const t=c.pos.indexOf(e);-1===t?c.pos.push(e):c.pos.splice(t,1)})(t.value)},[e.createElementVNode("text",{class:"pos-abbr"},e.toDisplayString(t.label),1),e.createElementVNode("text",{class:"pos-text"},e.toDisplayString(t.text),1)],10,["onClick"]))),64))])]),e.createElementVNode("view",{class:"form-group"},[e.createElementVNode("view",{class:"label-row"},[e.createElementVNode("text",{class:"required"},"*"),e.createElementVNode("text",{class:"label-text"},"ä¸­æ–‡é‡Šä¹‰")]),e.createElementVNode("view",{class:"input-container"},[e.withDirectives(e.createElementVNode("textarea",{id:"meaning-textarea",class:"form-textarea fixed-height","onUpdate:modelValue":o[1]||(o[1]=e=>c.meaning=e),placeholder:"è¾“å…¥ä¸­æ–‡é‡Šä¹‰","adjust-position":!1,"show-confirm-bar":!1,"disable-default-padding":!0,"cursor-spacing":10},null,512),[[e.vModelText,c.meaning]])])]),e.createElementVNode("view",{class:"form-group"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"label-text"},"ä¾‹å¥"),e.createElementVNode("view",{class:"add-button",onClick:h},[e.createElementVNode("text",{class:"add-icon"},"+"),e.createElementVNode("text",{class:"add-text"},"æ·»åŠ ä¾‹å¥")])]),c.examples.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"items-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.examples,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:"example-item"},[e.createElementVNode("view",{class:"input-container mb-2"},[e.withDirectives(e.createElementVNode("textarea",{class:"form-textarea fixed-height en-text","onUpdate:modelValue":e=>t.en=e,placeholder:"è¾“å…¥è‹±æ–‡ä¾‹å¥","adjust-position":!1,"show-confirm-bar":!1,"disable-default-padding":!0,"cursor-spacing":10},null,8,["onUpdate:modelValue"]),[[e.vModelText,t.en]])]),e.createElementVNode("view",{class:"input-container"},[e.withDirectives(e.createElementVNode("textarea",{class:"form-textarea fixed-height zh-text","onUpdate:modelValue":e=>t.zh=e,placeholder:"è¾“å…¥ä¸­æ–‡ç¿»è¯‘","adjust-position":!1,"show-confirm-bar":!1,"disable-default-padding":!0,"cursor-spacing":10},null,8,["onUpdate:modelValue"]),[[e.vModelText,t.zh]]),e.createElementVNode("view",{class:"delete-button",onClick:e=>(e=>{c.examples.splice(e,1)})(o)},[e.createElementVNode("text",{class:"delete-icon"},"Ã—")],8,["onClick"])])])))),128))])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"empty-state"},[e.createElementVNode("text",{class:"empty-text"},"æ·»åŠ ä¾‹å¥æœ‰åŠ©äºæ›´å¥½åœ°ç†è§£å•è¯ç”¨æ³•")]))]),e.createElementVNode("view",{class:"form-group"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"label-text"},"æ³¨æ„äº‹é¡¹"),e.createElementVNode("view",{class:"add-button",onClick:f},[e.createElementVNode("text",{class:"add-icon"},"+"),e.createElementVNode("text",{class:"add-text"},"æ·»åŠ æ³¨æ„äº‹é¡¹")])]),c.notes&&c.notes.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"items-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.notes,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:"note-item"},[e.createElementVNode("view",{class:"input-container"},[e.withDirectives(e.createElementVNode("textarea",{class:"form-textarea fixed-height","onUpdate:modelValue":e=>c.notes[o]=e,placeholder:"è¾“å…¥æ³¨æ„äº‹é¡¹","adjust-position":!1,"show-confirm-bar":!1,"disable-default-padding":!0,"cursor-spacing":10},null,8,["onUpdate:modelValue"]),[[e.vModelText,c.notes[o]]]),e.createElementVNode("view",{class:"delete-button",onClick:e=>(e=>{c.notes.splice(e,1)})(o)},[e.createElementVNode("text",{class:"delete-icon"},"Ã—")],8,["onClick"])])])))),128))])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"empty-state"},[e.createElementVNode("text",{class:"empty-text"},"æ·»åŠ æ³¨æ„äº‹é¡¹ï¼Œè®°å½•å•è¯ä½¿ç”¨ä¸­çš„å¸¸è§é”™è¯¯")]))]),e.createElementVNode("button",{class:"save-btn",onClick:y},e.toDisplayString(n.value?"ä¿å­˜ä¿®æ”¹":"ä¿å­˜å•è¯"),1)]))}},[["__scopeId","data-v-2eaa0eab"]]),b=k({__name:"index",setup(o){let a=null,n=null;e.onMounted((()=>{r(),function(){if("android"===uni.getSystemInfoSync().platform){(function(e){return new Promise(((t,o)=>{if("android"===uni.getSystemInfoSync().platform){let a=[];if(e)return void t();a=["android.permission.READ_EXTERNAL_STORAGE","android.permission.WRITE_EXTERNAL_STORAGE"],a.length>0?plus.android.requestPermissions(a,(function(e){e.granted.length===a.length?t():o("æƒé™æœªå®Œå…¨æˆäºˆ")}),(function(e){o(e)})):t()}else t()}))})(plus.android.importClass("android.os.Build").VERSION.SDK_INT>=29).then((()=>{t("log","at pages/settings/index.vue:89","æƒé™å·²æˆäºˆï¼Œåˆå§‹åŒ–æ–‡ä»¶æ“ä½œ");const e=plus.android.runtimeMainActivity(),o=e.onActivityResult;e.onActivityResult=function(r,s,i){if(t("log","at pages/settings/index.vue:99",`onActivityResult: requestCode=${r}, resultCode=${s}`),1!==r&&2!==r&&3!==r)return"function"==typeof o?o(r,s,i):void 0;if(s===plus.android.importClass("android.app.Activity").RESULT_OK)try{switch(r){case 1:t("log","at pages/settings/index.vue:127","å¤„ç†å¯¼å…¥æ–‡ä»¶ç»“æœ");try{const o=i.getData();if(!o)throw t("error","at pages/settings/index.vue:131","è·å–URIå¤±è´¥ï¼ŒURIä¸ºç©º"),new Error("è·å–URIå¤±è´¥");t("log","at pages/settings/index.vue:135","è·å–åˆ°å¯¼å…¥æ–‡ä»¶URI:",o.toString());plus.android.importClass("android.content.ContentResolver");const a=e.getContentResolver().openInputStream(o);if(a){const e=plus.android.importClass("java.io.BufferedReader"),o=new e(new(plus.android.importClass("java.io.InputStreamReader"))(a,"UTF-8")),n=new(plus.android.importClass("java.lang.StringBuilder"));let r;try{for(;null!=(r=o.readLine());)n.append(r);const e=n.toString();t("log","at pages/settings/index.vue:157","æ–‡ä»¶å†…å®¹è¯»å–æˆåŠŸï¼Œé•¿åº¦:",e.length),e.length>0?c(e):(t("error","at pages/settings/index.vue:162","è¯»å–çš„æ–‡ä»¶å†…å®¹ä¸ºç©º"),uni.showModal({title:"å¯¼å…¥å¤±è´¥",content:"æ–‡ä»¶å†…å®¹ä¸ºç©º",showCancel:!1,confirmText:"ç¡®å®š"}))}finally{try{o&&o.close(),a&&a.close()}catch(d){t("error","at pages/settings/index.vue:176","å…³é—­è¾“å…¥æµé”™è¯¯:",d)}}}else t("error","at pages/settings/index.vue:181","æ— æ³•æ‰“å¼€è¾“å…¥æµ"),uni.showToast({title:"æ— æ³•æ‰“å¼€æ–‡ä»¶",icon:"none"}),tryReadDownloadDir()}catch(u){t("error","at pages/settings/index.vue:189","è¯»å–æ–‡ä»¶å¤±è´¥:",u),uni.showModal({title:"è¯»å–æ–‡ä»¶å¤±è´¥",content:u.message||"æœªçŸ¥é”™è¯¯",showCancel:!1,confirmText:"ç¡®å®š"}),tryReadDownloadDir()}break;case 2:t("log","at pages/settings/index.vue:203","å¤„ç†å¯¼å‡ºæ–‡ä»¶ç»“æœ");try{if(a){const o=i.getData();t("log","at pages/settings/index.vue:207","è·å–åˆ°å¯¼å‡ºæ–‡ä»¶URI:",o.toString());plus.android.importClass("android.content.ContentResolver");const r=e.getContentResolver().openOutputStream(o);if(!r)throw t("error","at pages/settings/index.vue:255","æ— æ³•æ‰“å¼€è¾“å‡ºæµ"),new Error("æ— æ³•æ‰“å¼€è¾“å‡ºæµ");{const e=plus.android.importClass("java.io.OutputStreamWriter"),s=plus.android.importClass("java.io.BufferedWriter");let l=null;try{l=new s(new e(r,"UTF-8")),l.write(a),l.flush();let i="æ‚¨é€‰æ‹©çš„ä½ç½®";try{i=o.getPath()}catch(p){t("error","at pages/settings/index.vue:230","è·å–è·¯å¾„é”™è¯¯:",p)}uni.showModal({title:"å¯¼å‡ºæˆåŠŸ",content:`æ–‡ä»¶å·²ä¿å­˜åˆ°: ${i}`,showCancel:!1,confirmText:"ç¡®å®š"}),a=null,n=null}finally{try{l&&l.close(),r&&r.close()}catch(d){t("error","at pages/settings/index.vue:250","å…³é—­è¾“å‡ºæµé”™è¯¯:",d)}}}}}catch(u){t("error","at pages/settings/index.vue:260","ä¿å­˜æ–‡ä»¶å¤±è´¥:",u),uni.showModal({title:"å¯¼å‡ºå¤±è´¥",content:"ä¿å­˜æ–‡ä»¶åˆ°æ‚¨é€‰æ‹©çš„ä½ç½®å¤±è´¥: "+(u.message||"æœªçŸ¥é”™è¯¯"),showCancel:!1,confirmText:"ç¡®å®š"}),a&&n&&(l(a,n),a=null,n=null)}break;case 3:t("log","at pages/settings/index.vue:279","å¤„ç†ç›®å½•é€‰æ‹©ç»“æœ");try{if(a&&n){const o=i.getData();t("log","at pages/settings/index.vue:283","è·å–åˆ°ç›®å½•URI:",o.toString());const r=plus.android.importClass("android.provider.DocumentsContract"),s=(plus.android.importClass("android.content.ContentResolver"),r.createDocument(e.getContentResolver(),o,"application/json",n));if(!s)throw new Error("æ— æ³•åœ¨æ‰€é€‰ç›®å½•åˆ›å»ºæ–‡ä»¶");{const o=e.getContentResolver().openOutputStream(s);if(!o)throw new Error("æ— æ³•æ‰“å¼€è¾“å‡ºæµ");{const e=plus.android.importClass("java.io.OutputStreamWriter"),r=plus.android.importClass("java.io.BufferedWriter");let l=null;try{l=new r(new e(o,"UTF-8")),l.write(a),l.flush();let i="æ‚¨é€‰æ‹©çš„ç›®å½•";try{i=s.getPath()}catch(p){t("error","at pages/settings/index.vue:318","è·å–è·¯å¾„é”™è¯¯:",p)}uni.showModal({title:"å¯¼å‡ºæˆåŠŸ",content:`æ–‡ä»¶å·²ä¿å­˜åˆ°: ${i}`,showCancel:!1,confirmText:"ç¡®å®š"}),a=null,n=null}finally{try{l&&l.close(),o&&o.close()}catch(d){t("error","at pages/settings/index.vue:338","å…³é—­è¾“å‡ºæµé”™è¯¯:",d)}}}}}}catch(u){t("error","at pages/settings/index.vue:350","åœ¨é€‰å®šç›®å½•åˆ›å»ºæ–‡ä»¶å¤±è´¥:",u),uni.showModal({title:"å¯¼å‡ºå¤±è´¥",content:"åœ¨æ‚¨é€‰æ‹©çš„ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶å¤±è´¥: "+(u.message||"æœªçŸ¥é”™è¯¯"),showCancel:!1,confirmText:"ç¡®å®š"}),a&&n&&(l(a,n),a=null,n=null)}}}catch(v){t("error","at pages/settings/index.vue:369","å¤„ç†Activityç»“æœæ—¶å‡ºé”™:",v)}else 2!==r&&3!==r||(t("log","at pages/settings/index.vue:113","ç”¨æˆ·å–æ¶ˆäº†é€‰æ‹©ä¿å­˜ä½ç½®"),a&&n&&(l(a,n),a=null,n=null))}})).catch((e=>{t("error","at pages/settings/index.vue:374","æƒé™è¯·æ±‚å¤±è´¥:",e)}))}}()}));const r=()=>{try{const e=uni.getStorageSync("reciter_settings");if(e){JSON.parse(e)}}catch(e){t("error","at pages/settings/index.vue:437","åŠ è½½è®¾ç½®å¤±è´¥:",e)}},s=()=>{try{a=null,n=null;const s=uni.getStorageSync("reciter_words")||"[]",d=uni.getStorageSync("reciter_settings")||"{}",c={words:JSON.parse(s),settings:JSON.parse(d),exportTime:(new Date).toISOString(),version:"1.0.0"},u=JSON.stringify(c),p=`reciter_backup_${(new Date).toISOString().replace(/[:.]/g,"_")}.json`;if("android"===uni.getSystemInfoSync().platform)try{a=u,n=p;plus.android.importClass("android.os.Build").VERSION.SDK_INT;const r=plus.android.importClass("android.content.Intent"),s=(plus.android.importClass("android.net.Uri"),plus.android.runtimeMainActivity()),i=new r(r.ACTION_CREATE_DOCUMENT);i.addCategory(r.CATEGORY_OPENABLE),i.setType("application/json"),i.putExtra(r.EXTRA_TITLE,p);try{s.startActivityForResult(i,2),t("log","at pages/settings/index.vue:517","å¯åŠ¨æ–‡ä»¶ä¿å­˜å¯¹è¯æ¡†")}catch(e){t("error","at pages/settings/index.vue:519","å¯åŠ¨æ–‡ä»¶é€‰æ‹©å™¨å¤±è´¥:",e);try{plus.android.importClass("android.provider.DocumentsContract");const e=new r(r.ACTION_OPEN_DOCUMENT_TREE);s.startActivityForResult(e,3),t("log","at pages/settings/index.vue:526","å¯åŠ¨ç›®å½•é€‰æ‹©å¯¹è¯æ¡†")}catch(o){t("error","at pages/settings/index.vue:528","å¯åŠ¨ç›®å½•é€‰æ‹©å™¨å¤±è´¥:",o),l(u,p)}}}catch(r){t("error","at pages/settings/index.vue:535","å¯¼å‡ºæ“ä½œå¤±è´¥:",r),l(u,p),a=null,n=null}else i(u,p)}catch(s){t("error","at pages/settings/index.vue:606","å¯¼å‡ºæ•°æ®å¤±è´¥:",s),uni.showModal({title:"å¯¼å‡ºå¤±è´¥",content:s.message||"æœªçŸ¥é”™è¯¯",showCancel:!1,confirmText:"ç¡®å®š"})}};function l(e,o){try{plus.android.importClass("android.content.Context");const r=plus.android.importClass("android.os.Environment"),s=plus.android.importClass("java.io.File"),l=plus.android.importClass("java.io.FileOutputStream"),d=r.getExternalStoragePublicDirectory(r.DIRECTORY_DOWNLOADS);if(t("log","at pages/settings/index.vue:627","ä¸‹è½½ç›®å½•è·¯å¾„:",d.getAbsolutePath()),!d.exists()){t("log","at pages/settings/index.vue:632","åˆ›å»ºä¸‹è½½ç›®å½•ç»“æœ:",d.mkdirs())}const c=new s(d,o);t("log","at pages/settings/index.vue:637","è¦ä¿å­˜çš„æ–‡ä»¶è·¯å¾„:",c.getAbsolutePath());try{const o=new l(c),n=new(plus.android.importClass("java.io.OutputStreamWriter"))(o,"UTF-8"),r=new(plus.android.importClass("java.io.BufferedWriter"))(n);try{r.write(e),r.flush(),uni.showModal({title:"å¯¼å‡ºæˆåŠŸ",content:`æ–‡ä»¶å·²ä¿å­˜è‡³ï¼š\n${c.getAbsolutePath()}`,showCancel:!1,confirmText:"ç¡®å®š"})}finally{try{r&&r.close(),n&&n.close(),o&&o.close()}catch(a){t("error","at pages/settings/index.vue:665","å…³é—­è¾“å‡ºæµé”™è¯¯:",a)}}}catch(n){t("error","at pages/settings/index.vue:670","å†™å…¥æ–‡ä»¶å¤±è´¥:",n),uni.showModal({title:"å¯¼å‡ºå¤±è´¥",content:"å†™å…¥æ–‡ä»¶å¤±è´¥: "+((null==n?void 0:n.message)||"æœªçŸ¥é”™è¯¯"),showCancel:!1,confirmText:"ç¡®å®š"}),i(e,o)}}catch(r){t("error","at pages/settings/index.vue:681","Androidæ–‡ä»¶ä¿å­˜å¤±è´¥:",r),i(e,o)}}function i(e,o){try{plus.io.requestFileSystem(plus.io.PRIVATE_DOC,(a=>{try{a.root.getFile(o,{create:!0,exclusive:!1},(a=>{try{a.createWriter((a=>{a.onwrite=()=>{let e=null;try{plus.android.importClass("android.content.Context");const t=plus.android.runtimeMainActivity().getExternalFilesDir(null);t&&(e=t.getAbsolutePath())}catch(a){t("error","at pages/settings/index.vue:707","è·å–åº”ç”¨æ–‡æ¡£ç›®å½•å¤±è´¥:",a)}uni.showModal({title:"å¯¼å‡ºæˆåŠŸ",content:e?`æ–‡ä»¶å·²ä¿å­˜åˆ°åº”ç”¨æ–‡æ¡£ç›®å½•ï¼š\n${e}/${o}`:"æ–‡ä»¶å·²ä¿å­˜åˆ°åº”ç”¨æ–‡æ¡£ç›®å½•",showCancel:!1,confirmText:"ç¡®å®š"})},a.onerror=e=>{t("error","at pages/settings/index.vue:721","å†™å…¥æ–‡ä»¶é”™è¯¯:",e),uni.showModal({title:"å¯¼å‡ºå¤±è´¥",content:"ä¿å­˜æ–‡ä»¶å¤±è´¥: "+((null==e?void 0:e.message)||"æœªçŸ¥é”™è¯¯"),showCancel:!1,confirmText:"ç¡®å®š"})};try{a.write(e)}catch(n){t("error","at pages/settings/index.vue:733","å†™å…¥æ•°æ®é”™è¯¯:",n),uni.showModal({title:"å¯¼å‡ºå¤±è´¥",content:"å†™å…¥æ•°æ®é”™è¯¯: "+((null==n?void 0:n.message)||"æœªçŸ¥é”™è¯¯"),showCancel:!1,confirmText:"ç¡®å®š"})}}),(e=>{t("error","at pages/settings/index.vue:742","åˆ›å»ºå†™å…¥å™¨é”™è¯¯:",e),uni.showModal({title:"å¯¼å‡ºå¤±è´¥",content:"åˆ›å»ºå†™å…¥å™¨é”™è¯¯",showCancel:!1,confirmText:"ç¡®å®š"})}))}catch(n){t("error","at pages/settings/index.vue:751","æ–‡ä»¶Entryæ“ä½œé”™è¯¯:",n),uni.showModal({title:"å¯¼å‡ºå¤±è´¥",content:"æ–‡ä»¶æ“ä½œé”™è¯¯",showCancel:!1,confirmText:"ç¡®å®š"})}}),(e=>{t("error","at pages/settings/index.vue:760","è·å–æ–‡ä»¶é”™è¯¯:",e),uni.showModal({title:"å¯¼å‡ºå¤±è´¥",content:"è·å–æ–‡ä»¶é”™è¯¯",showCancel:!1,confirmText:"ç¡®å®š"})}))}catch(n){t("error","at pages/settings/index.vue:769","æ–‡ä»¶ç³»ç»Ÿæ“ä½œé”™è¯¯:",n),uni.showModal({title:"å¯¼å‡ºå¤±è´¥",content:"æ–‡ä»¶ç³»ç»Ÿæ“ä½œé”™è¯¯",showCancel:!1,confirmText:"ç¡®å®š"})}}),(e=>{t("error","at pages/settings/index.vue:778","è¯·æ±‚æ–‡ä»¶ç³»ç»Ÿé”™è¯¯:",e),uni.showModal({title:"å¯¼å‡ºå¤±è´¥",content:"è¯·æ±‚æ–‡ä»¶ç³»ç»Ÿé”™è¯¯",showCancel:!1,confirmText:"ç¡®å®š"})}))}catch(a){t("error","at pages/settings/index.vue:787","ä¿å­˜åˆ°ç§æœ‰ç›®å½•æ€»ä½“é”™è¯¯:",a),uni.showModal({title:"å¯¼å‡ºå¤±è´¥",content:"ä¿å­˜åˆ°ç§æœ‰ç›®å½•é”™è¯¯: "+((null==a?void 0:a.message)||"æœªçŸ¥é”™è¯¯"),showCancel:!1,confirmText:"ç¡®å®š"})}}const d=()=>{try{let o=function(){plus.android.importClass("android.content.Context");const e=plus.android.importClass("android.os.Environment"),t=(plus.android.importClass("java.io.File"),e.getExternalStoragePublicDirectory(e.DIRECTORY_DOWNLOADS));if(!t.exists())return!1;const o=t.listFiles();if(!o||0===o.length)return!1;for(let a=0;a<o.length;a++){const e=o[a].getName();if(e.startsWith("reciter_backup_")&&e.endsWith(".json"))return!0}return!1},a=function(){try{const a=plus.android.importClass("android.content.Intent"),r=(plus.android.importClass("android.net.Uri"),plus.android.runtimeMainActivity()),s=new a(a.ACTION_OPEN_DOCUMENT);s.setType("*/*");try{const e=plus.android.importClass("java.lang.String"),t=plus.android.newArray(e,2);t[0]="application/json",t[1]="text/plain",s.putExtra(a.EXTRA_MIME_TYPES,t)}catch(e){t("error","at pages/settings/index.vue:881","è®¾ç½®MIMEç±»å‹å¤±è´¥:",e),s.setType("application/json")}s.addCategory(a.CATEGORY_OPENABLE);try{r.startActivityForResult(s,1),t("log","at pages/settings/index.vue:891","å¯åŠ¨æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†")}catch(o){t("error","at pages/settings/index.vue:893","å¯åŠ¨åŸç”Ÿæ–‡ä»¶é€‰æ‹©å™¨å¤±è´¥:",o),n()}}catch(a){t("error","at pages/settings/index.vue:898","åˆ›å»ºæ–‡ä»¶é€‰æ‹©å™¨å¯¹è±¡å¤±è´¥:",a),n()}},n=function(){try{plus.android.importClass("android.content.Context");const e=plus.android.importClass("android.os.Environment"),o=(plus.android.importClass("java.io.File"),e.getExternalStoragePublicDirectory(e.DIRECTORY_DOWNLOADS));if(t("log","at pages/settings/index.vue:912","ä¸‹è½½ç›®å½•è·¯å¾„:",o.getAbsolutePath()),!o.exists())throw t("log","at pages/settings/index.vue:916","ä¸‹è½½ç›®å½•ä¸å­˜åœ¨"),new Error("ä¸‹è½½ç›®å½•ä¸å­˜åœ¨");const n=o.listFiles();if(!n||0===n.length)throw t("log","at pages/settings/index.vue:923","ä¸‹è½½ç›®å½•ä¸ºç©º"),new Error("ä¸‹è½½ç›®å½•ä¸ºç©º");const s=[];for(let t=0;t<n.length;t++){const e=n[t],o=e.getName();o.startsWith("reciter_backup_")&&o.endsWith(".json")&&s.push({name:o,path:e.getAbsolutePath(),lastModified:e.lastModified()})}if(t("log","at pages/settings/index.vue:941","æ‰¾åˆ°çš„å¤‡ä»½æ–‡ä»¶:",JSON.stringify(s)),0===s.length)return t("log","at pages/settings/index.vue:944","æ²¡æœ‰æ‰¾åˆ°å¤‡ä»½æ–‡ä»¶"),void a();s.sort(((e,t)=>t.lastModified-e.lastModified));const l=s.map((e=>({text:e.name,value:e.path})));uni.showActionSheet({itemList:l.map((e=>e.text)),success:function(e){const o=l[e.tapIndex].value;t("log","at pages/settings/index.vue:962","ç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶:",o),r(o)},fail:function(e){t("log","at pages/settings/index.vue:968","ç”¨æˆ·å–æ¶ˆé€‰æ‹©"),a()}})}catch(e){t("error","at pages/settings/index.vue:974","è¯»å–ä¸‹è½½ç›®å½•å¤±è´¥:",e),a()}},r=function(e){try{t("log","at pages/settings/index.vue:983","å‡†å¤‡è¯»å–æ–‡ä»¶:",e);const a=new(plus.android.importClass("java.io.File"))(e);if(!a.exists())throw new Error("æ–‡ä»¶ä¸å­˜åœ¨");if(!a.canRead())throw new Error("æ— æ³•è¯»å–æ–‡ä»¶ï¼Œæ²¡æœ‰è¯»å–æƒé™");const n=plus.android.importClass("java.io.FileInputStream"),r=plus.android.importClass("java.io.InputStreamReader"),s=plus.android.importClass("java.io.BufferedReader");let l=null,i=null,d=null;try{l=new n(a),i=new r(l,"UTF-8"),d=new s(i);const e=new(plus.android.importClass("java.lang.StringBuilder"));let o=null;for(;null!==(o=d.readLine());)e.append(o);const u=e.toString();if(t("log","at pages/settings/index.vue:1020","æ–‡ä»¶å†…å®¹é•¿åº¦:",u.length),!(u.length>0))throw new Error("æ–‡ä»¶å†…å®¹ä¸ºç©º");c(u)}finally{try{d&&d.close(),i&&i.close(),l&&l.close()}catch(o){t("error","at pages/settings/index.vue:1034","å…³é—­è¾“å…¥æµé”™è¯¯:",o)}}}catch(a){t("error","at pages/settings/index.vue:1039","è¯»å–é€‰æ‹©çš„æ–‡ä»¶å¤±è´¥:",a),uni.showModal({title:"è¯»å–æ–‡ä»¶å¤±è´¥",content:a.message||"æœªçŸ¥é”™è¯¯",showCancel:!1,confirmText:"ç¡®å®š"})}};if("android"===uni.getSystemInfoSync().platform)try{o()?n():a()}catch(e){t("error","at pages/settings/index.vue:814","æ£€æŸ¥ä¸‹è½½ç›®å½•å¤±è´¥:",e),a()}else uni.showModal({title:"æç¤º",content:"æ­¤åŠŸèƒ½ä»…æ”¯æŒAndroidå¹³å°",showCancel:!1,confirmText:"ç¡®å®š"})}catch(o){t("error","at pages/settings/index.vue:1058","å¯¼å…¥æ•°æ®æ€»ä½“å¤±è´¥:",o),uni.showModal({title:"å¯¼å…¥å¤±è´¥",content:o.message||"æœªçŸ¥é”™è¯¯",showCancel:!1,confirmText:"ç¡®å®š"})}},c=e=>{try{if(t("log","at pages/settings/index.vue:1072","å¯¼å…¥æ•°æ®é•¿åº¦:",e?e.length:0),!e||""===e.trim())throw new Error("å¯¼å…¥æ•°æ®ä¸ºç©º");let n;try{n=JSON.parse(e)}catch(o){t("error","at pages/settings/index.vue:1083","JSONè§£æé”™è¯¯:",o,"å°è¯•è§£æå‰100ä¸ªå­—ç¬¦:",e.substring(0,100)),t("log","at pages/settings/index.vue:1084","å°è¯•ç§»é™¤BOMæ ‡è®°åå†è§£æ");const r=e.replace(/^\uFEFF/,"");try{n=JSON.parse(r)}catch(a){throw t("error","at pages/settings/index.vue:1091","ç¬¬äºŒæ¬¡JSONè§£æå¤±è´¥:",a),new Error("å¯¼å…¥çš„æ•°æ®ä¸æ˜¯æœ‰æ•ˆçš„JSONæ ¼å¼")}}if(!n.words||!Array.isArray(n.words))throw new Error("æ•°æ®æ ¼å¼ä¸æ­£ç¡®ï¼šç¼ºå°‘wordsæ•°ç»„å­—æ®µ");uni.showModal({title:"ç¡®è®¤å¯¼å…¥",content:`å‘ç°${n.words.length}ä¸ªå•è¯æ•°æ®ï¼Œç¡®å®šè¦å¯¼å…¥å—ï¼Ÿæ³¨æ„ï¼šå¯¼å…¥å°†ä¼šè¦†ç›–å·²æœ‰çš„æ‰€æœ‰æ•°æ®ï¼`,confirmText:"ç¡®è®¤å¯¼å…¥",cancelText:"å–æ¶ˆ",success:e=>{e.confirm&&(uni.setStorageSync("reciter_words",JSON.stringify(n.words)),n.settings&&(uni.setStorageSync("reciter_settings",JSON.stringify(n.settings)),r()),uni.showToast({title:"æ•°æ®å¯¼å…¥æˆåŠŸ",icon:"success",duration:2e3}),uni.$emit("words-count-updated",{count:n.words.length}),uni.$emit("refreshWordList",{imported:!0}))}})}catch(n){t("error","at pages/settings/index.vue:1133","è§£æå¯¼å…¥æ•°æ®å¤±è´¥:",n),uni.showModal({title:"å¯¼å…¥æ•°æ®å¤±è´¥",content:n.message||"æœªçŸ¥é”™è¯¯",showCancel:!1,confirmText:"ç¡®å®š"})}},u=()=>{uni.showModal({title:"æ¸…ç©ºæ‰€æœ‰æ•°æ®",content:"æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤æ‰€æœ‰å•è¯æ•°æ®ï¼Œä¸”æ— æ³•æ¢å¤ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ",confirmText:"ç¡®è®¤æ¸…ç©º",confirmColor:"#ff4d4f",cancelText:"å–æ¶ˆ",success:e=>{e.confirm&&p()}})},p=()=>{try{uni.setStorageSync("reciter_words",JSON.stringify([])),uni.showToast({title:"æ‰€æœ‰æ•°æ®å·²æ¸…ç©º",icon:"success",duration:2e3});const e={};uni.setStorageSync("reciter_settings",JSON.stringify(e)),r(),uni.$emit("words-count-updated",{count:0}),setTimeout((()=>{uni.switchTab({url:"/pages/wordlist/index",success:()=>{uni.$emit("refreshWordList",{cleared:!0})}})}),1e3)}catch(e){t("error","at pages/settings/index.vue:1196","æ¸…ç©ºæ•°æ®å¤±è´¥:",e),uni.showToast({title:"æ¸…ç©ºæ•°æ®å¤±è´¥",icon:"none"})}};return(t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"settings-group"},[e.createElementVNode("view",{class:"group-title"},"æ•°æ®è®¾ç½®"),e.createElementVNode("view",{class:"setting-item",onClick:s},[e.createElementVNode("view",{class:"setting-label"},[e.createElementVNode("text",{class:"label-text"},"æ•°æ®å¯¼å‡º"),e.createElementVNode("text",{class:"setting-sublabel"},"å¯¼å‡ºæ‰€æœ‰å•è¯æ•°æ®")]),e.createElementVNode("view",{class:"setting-control"},[e.createElementVNode("button",{class:"action-btn export-btn",onClick:e.withModifiers(s,["stop"])},"å¯¼å‡º")])]),e.createElementVNode("view",{class:"setting-item",onClick:d},[e.createElementVNode("view",{class:"setting-label"},[e.createElementVNode("text",{class:"label-text"},"æ•°æ®å¯¼å…¥"),e.createElementVNode("text",{class:"setting-sublabel"},"å¯¼å…¥å¤‡ä»½çš„å•è¯æ•°æ®")]),e.createElementVNode("view",{class:"setting-control"},[e.createElementVNode("button",{class:"action-btn import-btn",onClick:e.withModifiers(d,["stop"])},"å¯¼å…¥")])]),e.createElementVNode("view",{class:"setting-item",onClick:u},[e.createElementVNode("view",{class:"setting-label"},[e.createElementVNode("text",{class:"label-text danger-text"},"æ¸…ç©ºæ‰€æœ‰æ•°æ®"),e.createElementVNode("text",{class:"setting-sublabel"},"åˆ é™¤æ‰€æœ‰å•è¯æ•°æ®")]),e.createElementVNode("view",{class:"setting-control"},[e.createElementVNode("button",{class:"action-btn danger-btn",onClick:e.withModifiers(u,["stop"])},"æ¸…ç©º")])])]),e.createElementVNode("view",{class:"settings-group"},[e.createElementVNode("view",{class:"group-title"},"å…³äºåº”ç”¨"),e.createElementVNode("view",{class:"setting-item"},[e.createElementVNode("view",{class:"setting-label"},[e.createElementVNode("text",{class:"label-text"},"ç‰ˆæœ¬")]),e.createElementVNode("view",{class:"setting-value"},[e.createElementVNode("text",null,"1.0.0")])]),e.createElementVNode("view",{class:"setting-item"},[e.createElementVNode("view",{class:"setting-label"},[e.createElementVNode("text",{class:"label-text"},"å¼€å‘è€…")]),e.createElementVNode("view",{class:"setting-value"},[e.createElementVNode("text",null,"Reciter Team")])])])]))}},[["__scopeId","data-v-311a03c5"]]),C="reciter_words",S={__name:"index",setup(a){const n=[{id:1,name:"apple",pos:"n.",meaning:"è‹¹æœ",englishMeaning:"a round fruit with red, yellow or green skin and firm white flesh",phonetic:"/ËˆÃ¦pl/",examples:[{en:"She took a bite of the apple.",zh:"å¥¹å’¬äº†ä¸€å£è‹¹æœã€‚"},{en:"An apple a day keeps the doctor away.",zh:"ä¸€å¤©ä¸€è‹¹æœï¼ŒåŒ»ç”Ÿè¿œç¦»æˆ‘ã€‚"}],notes:['appleé™¤è¡¨ç¤º"è‹¹æœ"å¤–ï¼Œä¹Ÿå¯ç”¨äºçŸ­è¯­"apple of one\'s eye"è¡¨ç¤º"å¿ƒè‚å®è´"','ç”¨äºæˆè¯­"the apple doesn\'t fall far from the tree"è¡¨ç¤º"æœ‰å…¶çˆ¶å¿…æœ‰å…¶å­"'],relatedWords:[{id:42,name:"applesauce",pos:"n.",meaning:"è‹¹æœé…±"},{id:43,name:"applet",pos:"n.",meaning:"å°åº”ç”¨ç¨‹åº"},{id:44,name:"pineapple",pos:"n.",meaning:"è èï¼Œå‡¤æ¢¨"}]},{id:2,name:"banana",pos:"n.",meaning:"é¦™è•‰",englishMeaning:"a long curved fruit with a yellow skin",phonetic:"/bÉ™ËˆnÉ‘ËnÉ™/",examples:[{en:"I like to eat a banana for breakfast.",zh:"æˆ‘å–œæ¬¢æ—©é¤åƒé¦™è•‰ã€‚"},{en:"The monkey peeled the banana before eating it.",zh:"çŒ´å­åœ¨åƒé¦™è•‰å‰å…ˆå‰¥äº†çš®ã€‚"}],notes:["é¦™è•‰åœ¨çƒ­å¸¦åœ°åŒºå¹¿æ³›ç§æ¤","æˆç†Ÿçš„é¦™è•‰ä¼šä»ç»¿è‰²å˜ä¸ºé»„è‰²"],relatedWords:[{id:45,name:"plantain",pos:"n.",meaning:"èŠ­è•‰"},{id:46,name:"fruit",pos:"n.",meaning:"æ°´æœ"}]},{id:3,name:"book",pos:"n./v.",meaning:"ä¹¦ï¼›é¢„è®¢",englishMeaning:"a written or printed work consisting of pages; to reserve something",phonetic:"/bÊŠk/",examples:[{en:"I read a book about ancient history.",zh:"æˆ‘è¯»äº†ä¸€æœ¬å…³äºå¤ä»£å†å²çš„ä¹¦ã€‚"},{en:"Please book a table for dinner tonight.",zh:"è¯·ä¸ºä»Šæ™šçš„æ™šé¤é¢„è®¢ä¸€å¼ æ¡Œå­ã€‚"},{en:"She likes to read books before going to sleep.",zh:"å¥¹å–œæ¬¢ç¡å‰é˜…è¯»ä¹¦ç±ã€‚"}],notes:['bookä½œä¸ºåè¯è¡¨ç¤º"ä¹¦ç±"ï¼Œä½œä¸ºåŠ¨è¯è¡¨ç¤º"é¢„è®¢"',"å¸¸ç”¨çŸ­è¯­ï¼šby the bookï¼ˆæŒ‰è§„çŸ©åŠäº‹ï¼‰ã€throw the book atï¼ˆä¸¥æƒ©ï¼‰ã€in someone's bookï¼ˆåœ¨æŸäººçœ‹æ¥ï¼‰"],relatedWords:[{id:47,name:"bookcase",pos:"n.",meaning:"ä¹¦æŸœ"},{id:48,name:"booklet",pos:"n.",meaning:"å°å†Œå­"},{id:49,name:"booking",pos:"n.",meaning:"é¢„è®¢"},{id:50,name:"bookworm",pos:"n.",meaning:"ä¹¦è™«ï¼›çˆ±è¯»ä¹¦çš„äºº"}]},{id:4,name:"pear",pos:"n.",meaning:"æ¢¨",englishMeaning:"a sweet fruit with a rounded bottom and slightly pointed top",phonetic:"/peÉ™r/",examples:[{en:"The pear was sweet and juicy.",zh:"è¿™ä¸ªæ¢¨åˆç”œåˆå¤šæ±ã€‚"},{en:"Asian pears are more round than European pears.",zh:"äºšæ´²æ¢¨æ¯”æ¬§æ´²æ¢¨æ›´åœ†ã€‚"}],notes:["æ¢¨æœ‰å¤šç§å“ç§ï¼Œå½¢çŠ¶å’Œé¢œè‰²å„å¼‚","å¸¸è§çš„è¡¨è¾¾ï¼špear-shapedï¼ˆæ¢¨å½¢çš„ï¼›å¤±è´¥çš„ï¼‰"],relatedWords:[{id:51,name:"fruit",pos:"n.",meaning:"æ°´æœ"},{id:52,name:"apple",pos:"n.",meaning:"è‹¹æœ"}]},{id:6,name:"eat",pos:"v.",meaning:"åƒï¼›è¿›é£Ÿ",englishMeaning:"to put food in your mouth and swallow it",phonetic:"/iËt/",examples:[{en:"We usually eat dinner at 7 pm.",zh:"æˆ‘ä»¬é€šå¸¸åœ¨æ™šä¸Š7ç‚¹åƒæ™šé¤ã€‚"},{en:"The children ate all the cookies.",zh:"å­©å­ä»¬åƒå…‰äº†æ‰€æœ‰çš„é¥¼å¹²ã€‚"},{en:"I don't eat meat.",zh:"æˆ‘ä¸åƒè‚‰ã€‚"}],notes:["eatçš„è¿‡å»å¼æ˜¯ateï¼Œè¿‡å»åˆ†è¯æ˜¯eaten","å¸¸ç”¨æ­é…ï¼šeat upï¼ˆåƒå®Œï¼‰ã€eat outï¼ˆåœ¨å¤–å°±é¤ï¼‰ã€eat away atï¼ˆé€æ¸ä¾µèš€ï¼‰",'è¡¨è¾¾"åƒé¥­"æ—¶ï¼Œå¯ä»¥è¯´eat a mealæˆ–have a meal'],relatedWords:[{id:53,name:"eatable",pos:"adj.",meaning:"å¯é£Ÿç”¨çš„"},{id:54,name:"edible",pos:"adj.",meaning:"å¯é£Ÿç”¨çš„"},{id:55,name:"feast",pos:"n./v.",meaning:"ç››å®´ï¼›å°½æƒ…äº«ç”¨"},{id:56,name:"devour",pos:"v.",meaning:"ç‹¼åè™å’½ï¼›æ´¥æ´¥æœ‰å‘³åœ°è¯»"}]}],r=e.ref({}),c=e.ref(null),u=e.ref(!0);e.ref(!1);const p=e.ref(!1),v=e.ref({show:!1,message:"æ•°æ®åŠ è½½å¤±è´¥",details:""}),g=e.ref(!1),h=e.reactive({name:"",pos:[],meaning:"",phonetic:"",examples:[],relatedWords:[],notes:[]}),x=[{label:"adj.",text:"å½¢å®¹è¯",value:"adj."},{label:"adv.",text:"å‰¯è¯",value:"adv."},{label:"n.",text:"åè¯",value:"n."},{label:"v.",text:"åŠ¨è¯",value:"v."},{label:"prep.",text:"ä»‹è¯",value:"prep."},{label:"conj.",text:"è¿è¯",value:"conj."},{label:"pron.",text:"ä»£è¯",value:"pron."},{label:"num.",text:"æ•°è¯",value:"num."},{label:"art.",text:"å† è¯",value:"art."}];e.computed((()=>r.value&&r.value.phonetic?r.value.phonetic.replace(/^\/|\/$/g,""):""));const f=e.computed((()=>h.pos.join("/"))),y=(e,t)=>{if(!e||!t)return e;const o=new RegExp(`\\b(${t})\\b`,"gi");return e.replace(o,'<span class="highlight">$1</span>')},k={},E=()=>{t("log","at pages/worddetail/index.vue:552","å¯åŠ¨ç´§æ€¥æ¢å¤æµç¨‹");try{const o=uni.getStorageSync(C);if(o)try{const e=JSON.parse(o);if(e&&"object"==typeof e&&!0===e.forceEmpty)return t("log","at pages/worddetail/index.vue:561","ç´§æ€¥æ¢å¤æ£€æµ‹åˆ°forceEmptyæ ‡å¿—ï¼Œæ˜¾ç¤ºæ¸…ç©ºçŠ¶æ€ä¿¡æ¯"),v.value={show:!0,message:"å•è¯æ•°æ®å·²è¢«æ¸…ç©º",details:"è¯·è¿”å›å•è¯åˆ—è¡¨é¡µé¢"},u.value=!1,!0}catch(e){t("error","at pages/worddetail/index.vue:573","æ£€æŸ¥forceEmptyæ ‡å¿—å¤±è´¥:",e)}if(n&&n.length>0){const e=n[0];return t("log","at pages/worddetail/index.vue:580","ä½¿ç”¨ç¬¬ä¸€ä¸ªæ¨¡æ‹Ÿå•è¯ä½œä¸ºç´§æ€¥æ¢å¤:",e.name),r.value=e,u.value=!1,v.value.show=!1,uni.showToast({title:"åŠ è½½äº†é»˜è®¤å•è¯",icon:"none",duration:2e3}),!0}return!1}catch(e){return t("error","at pages/worddetail/index.vue:597","ç´§æ€¥æ¢å¤ä¹Ÿå¤±è´¥äº†:",e),!1}},N=async(e=0,o=3)=>{if(!c.value)return t("error","at pages/worddetail/index.vue:696","åŠ è½½å¤±è´¥ï¼šwordId ä¸ºç©ºæˆ–æ— æ•ˆ"),v.value={show:!0,message:"æ— æ•ˆçš„å•è¯IDï¼Œè¯·è¿”å›åé‡è¯•",details:"å‚æ•°é”™è¯¯"},E()?void t("log","at pages/worddetail/index.vue:705","ç´§æ€¥æ¢å¤æˆåŠŸï¼Œæ˜¾ç¤ºé»˜è®¤å•è¯"):void(u.value=!1);try{const e=uni.getStorageSync(C);if(e){const o=JSON.parse(e);if(o&&"object"==typeof o&&!0===o.forceEmpty)return t("log","at pages/worddetail/index.vue:719","loadWordDetailæ£€æµ‹åˆ°forceEmptyæ ‡å¿—ï¼Œä¸åŠ è½½å•è¯å¹¶è¿”å›é”™è¯¯"),u.value=!1,void(v.value={show:!0,message:"å•è¯æ•°æ®å·²è¢«æ¸…ç©º",details:"è¯·è¿”å›å•è¯åˆ—è¡¨é¡µé¢"})}}catch(a){t("error","at pages/worddetail/index.vue:731","æ£€æŸ¥forceEmptyæ ‡å¿—å¤±è´¥:",a)}if(t("log","at pages/worddetail/index.vue:734",`å¼€å§‹åŠ è½½å•è¯è¯¦æƒ…ï¼ŒID:${c.value}ï¼Œå°è¯•æ¬¡æ•°:${e+1}/${o+1}`),u.value=!0,v.value.show=!1,uni.$wordPreloadCache&&uni.$wordPreloadCache[c.value]){t("log","at pages/worddetail/index.vue:740","ä»å…¨å±€é¢„åŠ è½½ç¼“å­˜è·å–å•è¯æ•°æ®:",uni.$wordPreloadCache[c.value].name);const e=uni.$wordPreloadCache[c.value];return e.examples||(e.examples=[]),e.relatedWords||(e.relatedWords=[]),e.notes||(e.notes=[]),r.value=e,k[c.value]=e,u.value=!1,void setTimeout((()=>{b(c.value)}),100)}if(k[c.value]){const e=uni.getStorageSync(C);if(e)try{const o=JSON.parse(e),a=Array.isArray(o)?o:o&&Array.isArray(o.words)?o.words:null;if(a){if(a.some((e=>e.id===c.value)))return t("log","at pages/worddetail/index.vue:784","ä»ç¼“å­˜åŠ è½½å•è¯è¯¦æƒ…:",k[c.value].name),r.value=k[c.value],void(u.value=!1);t("log","at pages/worddetail/index.vue:780",`å•è¯ID ${c.value} ä¸å†å­˜åœ¨äºæœ¬åœ°å­˜å‚¨ä¸­ï¼Œæ¸…é™¤ç¼“å­˜`),delete k[c.value]}}catch(a){t("error","at pages/worddetail/index.vue:791","æ£€æŸ¥å•è¯æ˜¯å¦å­˜åœ¨å¤±è´¥:",a),delete k[c.value]}else t("log","at pages/worddetail/index.vue:797","æœ¬åœ°å­˜å‚¨ä¸ºç©ºï¼Œæ¸…é™¤æ‰€æœ‰ç¼“å­˜"),Object.keys(k).forEach((e=>delete k[e]))}try{t("log","at pages/worddetail/index.vue:803","ä»å­˜å‚¨ä¸­åŠ è½½å•è¯...");const e=await Promise.race([V(c.value),new Promise(((e,t)=>setTimeout((()=>t(new Error("åŠ è½½è¶…æ—¶"))),3e3)))]);if(t("log","at pages/worddetail/index.vue:810","ä»å­˜å‚¨ä¸­åŠ è½½ç»“æœ:",e?e.name:"æ— ç»“æœ"),!e)throw t("error","at pages/worddetail/index.vue:813","åŠ è½½ç»“æœä¸ºç©º"),new Error("æ‰¾ä¸åˆ°å•è¯è¯¦æƒ…");r.value=e,k[c.value]=e,u.value=!1,setTimeout((()=>{b(c.value)}),100),t("log","at pages/worddetail/index.vue:828","å•è¯è¯¦æƒ…åŠ è½½æˆåŠŸ:",e.name)}catch(a){if(t("error","at pages/worddetail/index.vue:831",`åŠ è½½å•è¯è¯¦æƒ…å¤±è´¥(ID:${c.value})ï¼Œé”™è¯¯:`,a),u.value=!1,a.message&&a.message.includes("æ•°æ®å·²è¢«æ¸…ç©º"))return void(v.value={show:!0,message:"å•è¯æ•°æ®å·²è¢«æ¸…ç©º",details:"è¯·è¿”å›å•è¯åˆ—è¡¨é¡µé¢"});if(a.notFound){t("log","at pages/worddetail/index.vue:846",`IDä¸º${c.value}çš„å•è¯åœ¨æœ¬åœ°å­˜å‚¨ä¸­ä¸å­˜åœ¨ï¼Œå°è¯•ä»mockWordsæŸ¥æ‰¾`);const e=n.find((e=>e.id===c.value));if(e)return t("log","at pages/worddetail/index.vue:851",`åœ¨mockWordsä¸­æ‰¾åˆ°å•è¯: ${e.name}ï¼Œä½†æœ¬åœ°å­˜å‚¨ä¸­æ²¡æœ‰è¿™ä¸ªå•è¯`),void(v.value={show:!0,message:`IDä¸º${c.value}çš„å•è¯åœ¨æ‚¨çš„å•è¯åº“ä¸­ä¸å­˜åœ¨`,details:`æ‚¨å¯èƒ½å°è¯•è®¿é—®çš„æ˜¯ç¤ºä¾‹å•è¯"${e.name}"ï¼Œä½†å®ƒä¸åœ¨æ‚¨çš„å•è¯åº“ä¸­`})}if(v.value={show:!0,message:`åŠ è½½å¤±è´¥: ${a.message||"æœªçŸ¥é”™è¯¯"}`,details:a.stack},e>=o&&(t("log","at pages/worddetail/index.vue:871","å·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œå°è¯•ç´§æ€¥æ¢å¤"),E()))return;if(a.message.includes("æ‰¾ä¸åˆ°å•è¯")||a.message.includes("æ— æ•ˆID")){if(E())return;return uni.showToast({title:"æ‰¾ä¸åˆ°è¯¥å•è¯",icon:"none"}),void setTimeout((()=>uni.navigateBack()),1500)}if(e>=o)return uni.showToast({title:"åŠ è½½å¤±è´¥ï¼Œå°†è¿”å›ä¸Šä¸€é¡µ",icon:"none",duration:2e3}),void setTimeout((()=>uni.navigateBack()),2e3);t("log","at pages/worddetail/index.vue:902",`å‡†å¤‡è¿›è¡Œç¬¬${e+2}æ¬¡å°è¯•...`),N(e+1,o)}},V=e=>new Promise(((o,a)=>{t("log","at pages/worddetail/index.vue:910",`å°è¯•ä»æœ¬åœ°å­˜å‚¨åŠ è½½IDä¸º${e}çš„å•è¯è¯¦æƒ…`);try{const r=uni.getStorageSync(C);if(t("log","at pages/worddetail/index.vue:915",`ä»æœ¬åœ°å­˜å‚¨åŠ è½½å•è¯æ•°æ®ï¼Œå­˜å‚¨çŠ¶æ€: ${!!r}`),!r)return t("error","at pages/worddetail/index.vue:918","æœ¬åœ°å­˜å‚¨ä¸­æ²¡æœ‰å•è¯æ•°æ®"),void a(new Error("æœ¬åœ°å­˜å‚¨ä¸­æ²¡æœ‰å•è¯æ•°æ®"));try{let n,s=JSON.parse(r);if(Array.isArray(s))t("log","at pages/worddetail/index.vue:929","æ£€æµ‹åˆ°æ—§æ ¼å¼å­˜å‚¨æ•°æ®ï¼ˆæ•°ç»„ï¼‰"),n=s;else{if(!s||"object"!=typeof s||!Array.isArray(s.words))return t("error","at pages/worddetail/index.vue:935","æœªè¯†åˆ«çš„å­˜å‚¨æ•°æ®æ ¼å¼"),void a(new Error("å•è¯æ•°æ®æ ¼å¼é”™è¯¯"));t("log","at pages/worddetail/index.vue:932","æ£€æµ‹åˆ°æ–°æ ¼å¼å­˜å‚¨æ•°æ®ï¼ˆå¯¹è±¡åŒ…å«wordsæ•°ç»„ï¼‰"),n=s.words}const l="string"==typeof e?parseInt(e,10):e;t("log","at pages/worddetail/index.vue:942",`æŸ¥æ‰¾IDä¸º${l}çš„å•è¯ï¼ŒIDç±»å‹: ${typeof l}`);const i=n.find((e=>e.id===l));if(i)t("log","at pages/worddetail/index.vue:948",`æ‰¾åˆ°IDä¸º${l}çš„å•è¯: ${i.name}`),o(i);else{t("error","at pages/worddetail/index.vue:951",`æœªæ‰¾åˆ°IDä¸º${l}çš„å•è¯`);const e=new Error(`æ‰¾ä¸åˆ°IDä¸º${l}çš„å•è¯`);e.notFound=!0,a(e)}}catch(n){t("error","at pages/worddetail/index.vue:957","è§£æå•è¯æ•°æ®å¤±è´¥:",n),a(new Error("è§£æå•è¯æ•°æ®å¤±è´¥: "+n.message))}}catch(r){t("error","at pages/worddetail/index.vue:961","åŠ è½½å•è¯è¯¦æƒ…æ—¶å‡ºé”™:",r,r.stack),a(r)}})),b=async e=>{try{const o=uni.getStorageSync(C);if(!o)return;const a=JSON.parse(o);if(a&&"object"==typeof a&&!0===a.forceEmpty)return void t("log","at pages/worddetail/index.vue:976","é¢„åŠ è½½å‘ç°forceEmptyæ ‡å¿—ï¼Œå–æ¶ˆé¢„åŠ è½½æ“ä½œ");const n=Array.isArray(a)?a:a&&Array.isArray(a.words)?a.words:null;if(!Array.isArray(n))return;const r=n.findIndex((t=>t.id===e));if(-1===r)return;const s=[r-2,r-1,r+1,r+2].filter((e=>e>=0&&e<n.length));t("log","at pages/worddetail/index.vue:998","é¢„åŠ è½½ç›¸é‚»å•è¯:",s.map((e=>n[e].name)).join(", ")),s.forEach((e=>{const t=n[e];t&&!k[t.id]&&(k[t.id]=t)}))}catch(o){t("error","at pages/worddetail/index.vue:1008","é¢„åŠ è½½ç›¸é‚»å•è¯å¤±è´¥:",o)}},S=()=>{if(t("log","at pages/worddetail/index.vue:1036","ç”¨æˆ·ç‚¹å‡»é‡è¯•åŠ è½½"),v.value.show=!1,!c.value){if(t("error","at pages/worddetail/index.vue:1041","wordIdæ— æ•ˆï¼Œå°è¯•ä½¿ç”¨é»˜è®¤ID"),!(n&&n.length>0))return uni.showToast({title:"æ— æ³•åŠ è½½é»˜è®¤å•è¯",icon:"none"}),void setTimeout((()=>uni.navigateBack()),1500);c.value=n[0].id,t("log","at pages/worddetail/index.vue:1045","è®¾ç½®äº†é»˜è®¤ID:",c.value)}N(0,3)};function T(){t("log","at pages/worddetail/index.vue:1059","dismissErrorè¢«è°ƒç”¨"),v.value.show=!1,uni.navigateBack()}const B=e=>{const o=`/pages/worddetail/index?id=${e}`;t("log","at pages/worddetail/index.vue:1132",`è·³è½¬URL: ${o}`),p.value=!1,uni.navigateTo({url:o,success:()=>{t("log","at pages/worddetail/index.vue:1140",`æˆåŠŸè·³è½¬åˆ°å•è¯ID: ${e}`)},fail:e=>{t("error","at pages/worddetail/index.vue:1143","è·³è½¬å¤±è´¥:",e),uni.showToast({title:"è·³è½¬å¤±è´¥",icon:"none"})}})},D=()=>{try{if(!r.value||!r.value.id)return void uni.showToast({title:"å•è¯ä¿¡æ¯ä¸å®Œæ•´ï¼Œæ— æ³•ç¼–è¾‘",icon:"none"});g.value=!0,h.name=r.value.name||"",h.meaning=r.value.meaning||"",h.phonetic=r.value.phonetic||"","string"==typeof r.value.pos?h.pos=r.value.pos.split("/").filter(Boolean):Array.isArray(r.value.pos)?h.pos=[...r.value.pos]:h.pos=[],h.examples=Array.isArray(r.value.examples)?JSON.parse(JSON.stringify(r.value.examples)):[],h.relatedWords=Array.isArray(r.value.relatedWords)?JSON.parse(JSON.stringify(r.value.relatedWords)):[],h.notes=Array.isArray(r.value.notes)?JSON.parse(JSON.stringify(r.value.notes)):[],t("log","at pages/worddetail/index.vue:1193","è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œè¡¨å•æ•°æ®:",h)}catch(e){t("error","at pages/worddetail/index.vue:1195","å¤„ç†ç¼–è¾‘æ“ä½œå¤±è´¥:",e),uni.showToast({title:"æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}},A=async()=>{var e;try{if(!h.name||""===h.name.trim())return void uni.showToast({title:"è¯·è¾“å…¥å•è¯",icon:"none",duration:2e3});if(0===h.pos.length)return void uni.showToast({title:"è¯·é€‰æ‹©è‡³å°‘ä¸€ä¸ªè¯æ€§",icon:"none",duration:2e3});if(!h.meaning||""===h.meaning.trim())return void uni.showToast({title:"è¯·è¾“å…¥ä¸­æ–‡é‡Šä¹‰",icon:"none",duration:2e3});uni.showLoading({title:"ä¿å­˜ä¿®æ”¹...",mask:!0});const a={id:r.value.id,name:h.name,pos:f.value,meaning:h.meaning,phonetic:h.phonetic||"",examples:h.examples||[],relatedWords:h.relatedWords||[],notes:h.notes||[]},n=(null==(e=r.value.relatedWords)?void 0:e.map((e=>e.id)))||[],s=h.relatedWords.map((e=>e.id)),i=s.filter((e=>!n.includes(e))),u=n.filter((e=>!s.includes(e)));if(await d(a.id,a),i.length>0||u.length>0)try{for(const e of i){const t=await l(e);if(t){t.relatedWords||(t.relatedWords=[]);t.relatedWords.some((e=>e.id===r.value.id))||(t.relatedWords.push({id:r.value.id,name:a.name,pos:a.pos,meaning:a.meaning}),await d(t.id,t))}}for(const e of u){const t=await l(e);t&&t.relatedWords&&(t.relatedWords=t.relatedWords.filter((e=>e.id!==r.value.id)),await d(t.id,t))}}catch(o){t("error","at pages/worddetail/index.vue:1307","æ›´æ–°ç›¸å…³å•è¯å…³è”å…³ç³»å¤±è´¥:",o)}t("log","at pages/worddetail/index.vue:1313","æ¸…é™¤å•è¯IDç¼“å­˜:",c.value),delete k[c.value],uni.$wordPreloadCache&&uni.$wordPreloadCache[c.value]&&(t("log","at pages/worddetail/index.vue:1318","æ¸…é™¤å…¨å±€é¢„åŠ è½½ç¼“å­˜"),delete uni.$wordPreloadCache[c.value]),t("log","at pages/worddetail/index.vue:1323","ä»å­˜å‚¨ä¸­é‡æ–°åŠ è½½å•è¯æ•°æ®");const p=await l(c.value);p?(t("log","at pages/worddetail/index.vue:1328","æˆåŠŸä»å­˜å‚¨ä¸­åŠ è½½æœ€æ–°æ•°æ®:",p.name),r.value=p,k[c.value]=p):(t("log","at pages/worddetail/index.vue:1334","æ— æ³•ä»å­˜å‚¨ä¸­åŠ è½½æœ€æ–°æ•°æ®ï¼Œä½¿ç”¨ä¿å­˜çš„æ•°æ®"),r.value={...a},k[c.value]={...a}),g.value=!1,uni.hideLoading(),uni.showToast({title:"ä¿®æ”¹æˆåŠŸ",icon:"success",duration:1500}),t("log","at pages/worddetail/index.vue:1351","å‘é€åˆ·æ–°å•è¯åˆ—è¡¨äº‹ä»¶"),uni.$emit("refreshWordList")}catch(o){uni.hideLoading(),t("error","at pages/worddetail/index.vue:1355","ä¿å­˜ä¿®æ”¹å¤±è´¥:",o),uni.showToast({title:"ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none",duration:2e3})}},I=()=>{g.value=!1,h.name="",h.pos=[],h.meaning="",h.phonetic="",h.examples=[],h.relatedWords=[],h.notes=[],uni.showToast({title:"å·²å–æ¶ˆç¼–è¾‘",icon:"none",duration:1500})},j=()=>{h.examples.push({en:"",zh:""})},$=()=>{h.notes.push("")},M=()=>{r.value&&r.value.id?uni.showModal({title:"ç¡®è®¤åˆ é™¤",content:`ç¡®å®šè¦åˆ é™¤å•è¯"${r.value.name}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`,confirmText:"åˆ é™¤",confirmColor:"#ff0000",cancelText:"å–æ¶ˆ",success:async e=>{var a,n;if(e.confirm)try{uni.showLoading({title:"åˆ é™¤ä¸­..."});const e=(null==(a=r.value.relatedWords)?void 0:a.map((e=>e.id)))||[],u=r.value.id;if(await(n=u,new Promise((e=>{try{t("log","at services/word.js:444",`å‡†å¤‡åˆ é™¤IDä¸º${n}çš„å•è¯`);const r=s().filter((e=>e.id!==n));uni.setStorageSync(o,JSON.stringify(r)),void 0!==uni.$wordIdCache&&(t("log","at services/word.js:458",`æ¸…é™¤IDä¸º${n}çš„å•è¯ç¼“å­˜`),uni.$wordIdCache&&uni.$wordIdCache[n]&&delete uni.$wordIdCache[n],t("log","at services/word.js:462","ä¸ºå®‰å…¨èµ·è§ï¼Œæ¸…ç©ºæ•´ä¸ªwordIdCache"),uni.$wordIdCache={}),void 0!==uni.$wordPreloadCache&&(t("log","at services/word.js:468","æ¸…é™¤å…¨å±€å•è¯é¢„åŠ è½½ç¼“å­˜"),uni.$wordPreloadCache={}),i(r.length);try{t("log","at services/word.js:477","å‘å‡ºå•è¯æ•°æ®æ›´æ–°äº‹ä»¶é€šçŸ¥"),uni.$emit("global-data-updated")}catch(a){t("error","at services/word.js:480","å‘å‡ºäº‹ä»¶æ—¶å‡ºé”™:",a)}e(r)}catch(r){t("error","at services/word.js:485","åˆ é™¤å•è¯å‡ºé”™:",r),e([])}}))),void 0!==uni.$wordIdCache&&(t("log","at pages/worddetail/index.vue:1450",`æ¸…é™¤IDä¸º${u}çš„å•è¯ç¼“å­˜`),uni.$wordIdCache&&uni.$wordIdCache[u]&&delete uni.$wordIdCache[u],t("log","at pages/worddetail/index.vue:1454","ä¸ºå®‰å…¨èµ·è§ï¼Œæ¸…ç©ºæ•´ä¸ªwordIdCache"),uni.$wordIdCache={}),void 0!==uni.$wordPreloadCache&&(t("log","at pages/worddetail/index.vue:1460","æ¸…é™¤å…¨å±€å•è¯é¢„åŠ è½½ç¼“å­˜"),uni.$wordPreloadCache={}),e.length>0)try{for(const t of e){const e=await l(t);e&&e.relatedWords&&(e.relatedWords=e.relatedWords.filter((e=>e.id!==u)),await d(e.id,e))}}catch(c){t("error","at pages/worddetail/index.vue:1478","æ›´æ–°å…³è”å…³ç³»å¤±è´¥:",c)}t("log","at pages/worddetail/index.vue:1484","å‘é€åˆ·æ–°å•è¯åˆ—è¡¨äº‹ä»¶"),uni.$emit("refreshWordList"),uni.hideLoading(),uni.showToast({title:"åˆ é™¤æˆåŠŸ",icon:"success"}),setTimeout((()=>{uni.navigateBack()}),1500)}catch(u){t("error","at pages/worddetail/index.vue:1495","åˆ é™¤å•è¯å¤±è´¥:",u),uni.hideLoading(),uni.showModal({title:"åˆ é™¤å¤±è´¥",content:"åˆ é™¤å•è¯æ—¶å‡ºç°é”™è¯¯ï¼Œæ˜¯å¦é‡è¯•ï¼Ÿ",confirmText:"é‡è¯•",success:e=>{e.confirm&&M()}})}}}):uni.showToast({title:"å•è¯ä¿¡æ¯ä¸å®Œæ•´ï¼Œæ— æ³•åˆ é™¤",icon:"none"})},L=()=>{t("log","at pages/worddetail/index.vue:1517","åŠ è½½é»˜è®¤å•è¯ä½œä¸ºå¤‡ç”¨");const e=n[0];return!!e&&(t("log","at pages/worddetail/index.vue:1522","æˆåŠŸè·å–é»˜è®¤å•è¯:",e.name),r.value=e,c.value=e.id,u.value=!1,setTimeout((()=>{uni.showToast({title:"å·²åŠ è½½é»˜è®¤å•è¯",icon:"none",duration:2e3})}),500),!0)},P=()=>{t("log","at pages/worddetail/index.vue:1544","å¼ºåˆ¶åˆå§‹åŒ–å•è¯è¯¦æƒ…é¡µ"),!u.value&&r.value&&r.value.id?t("log","at pages/worddetail/index.vue:1548","é¡µé¢å·²æˆåŠŸåŠ è½½ï¼Œæ— éœ€åˆå§‹åŒ–"):u.value&&(t("log","at pages/worddetail/index.vue:1554","é¡µé¢ä»åœ¨åŠ è½½ä¸­ï¼Œå¼ºåˆ¶åŠ è½½é»˜è®¤å•è¯"),L())};function O(e){t("log","at pages/worddetail/index.vue:1722","å¼€å§‹å¤„ç†IDå‚æ•°:",e,"ç±»å‹:",typeof e);try{const o=e;let a;if("number"==typeof o)a=o;else{if("string"!=typeof o)throw new Error("æ„å¤–çš„IDç±»å‹: "+typeof o);if(!/^\d+$/.test(o))throw new Error(`æ— æ•ˆçš„IDæ ¼å¼: ${o}`);a=parseInt(o,10)}if(isNaN(a))throw new Error("æ— æ•ˆçš„IDæ ¼å¼ (NaN)");if(uni.$wordPreloadCache&&uni.$wordPreloadCache[a]){t("log","at pages/worddetail/index.vue:1748","ä»å…¨å±€é¢„åŠ è½½ç¼“å­˜è·å–å•è¯æ•°æ®:",uni.$wordPreloadCache[a].name);const e=uni.$wordPreloadCache[a];return e.examples||(e.examples=[]),e.relatedWords||(e.relatedWords=[]),e.notes||(e.notes=[]),c.value=a,r.value=e,k[a]=e,u.value=!1,void setTimeout((()=>{b(a)}),100)}t("log","at pages/worddetail/index.vue:1774","æˆåŠŸè§£æIDï¼Œè®¾ç½®wordIdä¸º:",a),c.value=a,N(0,3)}catch(o){t("error","at pages/worddetail/index.vue:1780","å¤„ç†IDå‚æ•°é”™è¯¯:",o),E()?t("log","at pages/worddetail/index.vue:1784","å‚æ•°å¤„ç†é”™è¯¯ï¼Œä½†ç´§æ€¥æ¢å¤æˆåŠŸ"):(v.value={show:!0,message:"å‚æ•°é”™è¯¯ï¼Œæ— æ³•åŠ è½½å•è¯",details:o.message},u.value=!1)}}function _(){t("log","at pages/worddetail/index.vue:1798","å¤„ç†ç¼ºå¤±IDæƒ…å†µ"),t("log","at pages/worddetail/index.vue:1800","å°è¯•ä½¿ç”¨é»˜è®¤ID 1 (apple)"),c.value=1,c.value?(t("log","at pages/worddetail/index.vue:1804","å·²è®¾ç½®é»˜è®¤ID:",c.value),N(0,3)):E()?t("log","at pages/worddetail/index.vue:1809","æ— æœ‰æ•ˆå‚æ•°ï¼Œä½†ç´§æ€¥æ¢å¤æˆåŠŸ"):(v.value={show:!0,message:"æœªæä¾›å•è¯ID",details:"å‚æ•°ç¼ºå¤±"},u.value=!1)}w((()=>{t("log","at pages/worddetail/index.vue:1589","å•è¯è¯¦æƒ…é¡µé¢æ˜¾ç¤ºï¼Œæ‰§è¡ŒhandlePageShowï¼Œå½“å‰ID:",c.value);const e=getCurrentPages(),o=e[e.length-1];o&&o.$refreshCount>0?c.value?(k[c.value]&&(t("log","at pages/worddetail/index.vue:1565","é¡µé¢æ˜¾ç¤ºæ—¶æ¸…é™¤ç¼“å­˜ï¼Œç¡®ä¿åŠ è½½æœ€æ–°æ•°æ®:",c.value),delete k[c.value]),uni.$wordPreloadCache&&uni.$wordPreloadCache[c.value]&&(t("log","at pages/worddetail/index.vue:1571","é¡µé¢æ˜¾ç¤ºæ—¶æ¸…é™¤å…¨å±€é¢„åŠ è½½ç¼“å­˜"),delete uni.$wordPreloadCache[c.value]),setTimeout((()=>{t("log","at pages/worddetail/index.vue:1577","é¡µé¢æ˜¾ç¤ºï¼Œé‡æ–°åŠ è½½å•è¯è¯¦æƒ…:",c.value),N(0,3)}),200)):(t("log","at pages/worddetail/index.vue:1582","handlePageShow: IDä¸ºç©ºï¼Œå°è¯•åŠ è½½é»˜è®¤å•è¯"),L()):o&&(o.$refreshCount=(o.$refreshCount||0)+1)})),e.onMounted((()=>{if(t("log","at pages/worddetail/index.vue:1605","å•è¯è¯¦æƒ…é¡µé¢å·²æŒ‚è½½ï¼ŒID:",c.value),!c.value&&!p.value){t("log","at pages/worddetail/index.vue:1609","onMounted: IDä¸ºç©ºï¼Œå°è¯•ä½¿ç”¨é»˜è®¤ID");try{const e=getCurrentPages(),o=e[e.length-1];if(o&&o.$page&&o.$page.fullPath){t("log","at pages/worddetail/index.vue:1616","onMounted: å°è¯•ä»URLè·å–ID, å½“å‰è·¯å¾„:",o.$page.fullPath);const e=/[?&]id=([^&]+)/.exec(o.$page.fullPath);if(e&&e[1]){const o=parseInt(e[1],10);return t("log","at pages/worddetail/index.vue:1622","onMounted: ä»URLæˆåŠŸè·å–ID:",o),p.value=!0,c.value=o,t("log","at pages/worddetail/index.vue:1628","onMounted: è®¾ç½®wordIdä¸º:",c.value),void N(0,3)}t("log","at pages/worddetail/index.vue:1634","onMounted: æ— æ³•ä»URLè·å–IDå‚æ•°")}else t("log","at pages/worddetail/index.vue:1637","onMounted: æ— æ³•è·å–å½“å‰é¡µé¢ä¿¡æ¯")}catch(e){t("error","at pages/worddetail/index.vue:1640","onMounted: è§£æURLè·å–IDå‡ºé”™:",e)}setTimeout((()=>{c.value||p.value||(t("log","at pages/worddetail/index.vue:1646","onMounted: ç»è¿‡å»¶æ—¶åIDä»ä¸ºç©ºï¼Œè®¾ç½®é»˜è®¤ID"),c.value=1,u.value&&N(0,3))}),500)}setTimeout(P,5e3)})),m((e=>{t("log","at pages/worddetail/index.vue:1661","å•è¯è¯¦æƒ…é¡µé¢ onLoad ç”Ÿå‘½å‘¨æœŸè§¦å‘ï¼Œå‚æ•°:",e),r.value={name:"åŠ è½½ä¸­..."},u.value=!0,v.value.show=!1;const o=getCurrentPages(),a=o[o.length-1];let n=null;a&&a.options&&(n=a.options);const s=e&&Object.keys(e).length>0?e:n;let l=!1;try{if(s&&void 0!==s.id&&null!==s.id&&""!==s.id)return t("log","at pages/worddetail/index.vue:1686","ä»optionsç›´æ¥è·å–åˆ°ID:",s.id),l=!0,p.value=!0,void O(s.id);if(!l){const e=a?a.route+(a.$page&&a.$page.fullPath?a.$page.fullPath:""):"",o=/[?&]id=([^&]+)/.exec(e);if(o&&o[1])return t("log","at pages/worddetail/index.vue:1700","ä»URLæˆåŠŸè§£æåˆ°ID:",o[1]),l=!0,p.value=!0,void O(o[1])}l||(t("error","at pages/worddetail/index.vue:1711","æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„IDå‚æ•°"),_())}catch(i){t("error","at pages/worddetail/index.vue:1715","onLoadå¤„ç†æ€»ä½“é”™è¯¯:",i),_()}}));const W=async()=>{t("log","at pages/worddetail/index.vue:1823","å•è¯åˆ·æ–°æŒ‰é’®è¢«ç‚¹å‡»");try{const e=uni.getStorageSync(C);if(e){const o=JSON.parse(e);if(o&&"object"==typeof o&&!0===o.forceEmpty)return t("log","at pages/worddetail/index.vue:1831","handleRefreshæ£€æµ‹åˆ°forceEmptyæ ‡å¿—ï¼Œæ— æ³•åˆ·æ–°å•è¯"),void uni.showToast({title:"æ•°æ®å·²è¢«æ¸…ç©ºï¼Œæ— æ³•åˆ·æ–°",icon:"none",duration:2e3})}}catch(e){t("error","at pages/worddetail/index.vue:1841","æ£€æŸ¥forceEmptyæ ‡å¿—å¤±è´¥:",e)}uni.showLoading({title:"åˆ·æ–°å•è¯ä¸­...",mask:!0}),k[c.value]&&(t("log","at pages/worddetail/index.vue:1852",`æ¸…é™¤IDä¸º${c.value}çš„ç¼“å­˜`),delete k[c.value]),setTimeout((async()=>{uni.hideLoading();try{t("log","at pages/worddetail/index.vue:1862","é‡æ–°ä»å­˜å‚¨åŠ è½½å•è¯è¯¦æƒ…"),await N(0,3),uni.showToast({title:"åˆ·æ–°æˆåŠŸ",icon:"success",duration:1500})}catch(e){t("error","at pages/worddetail/index.vue:1871","åˆ·æ–°åé‡æ–°åŠ è½½å•è¯è¯¦æƒ…å¤±è´¥:",e),uni.showToast({title:"æ— æ³•åˆ·æ–°å•è¯",icon:"none",duration:1500})}}),1e3)},U=e.ref(""),R=e.ref([]),F=e.ref(!1),J=async e=>{var o;const a=(null==(o=null==e?void 0:e.detail)?void 0:o.value)||U.value;if(a)try{const e=await(e=>new Promise((o=>{try{let t=s();if(!e)return void o(t);const a=e.toLowerCase();o(t.filter((e=>e.name.toLowerCase().includes(a)||e.meaning.includes(a))))}catch(a){t("error","at services/word.js:517","æœç´¢å•è¯å‡ºé”™:",a),o([])}})))(a),o=e.filter((e=>{if(e.id===r.value.id)return!1;return!h.relatedWords.some((t=>t.id===e.id))}));R.value=o}catch(n){t("error","at pages/worddetail/index.vue:1911","æœç´¢ç›¸å…³å•è¯å¤±è´¥:",n),uni.showToast({title:"æœç´¢å¤±è´¥",icon:"none"})}else R.value=[]},z=()=>{U.value="",R.value=[],F.value=!1},q=()=>{F.value=!0,U.value="",R.value=[]};return(o,a)=>(e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:e.normalizeClass(["word-header",{loading:u.value}])},[e.createElementVNode("view",{class:"word-main"},[g.value?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,class:"word-name-input","onUpdate:modelValue":a[0]||(a[0]=e=>h.name=e),placeholder:"è¾“å…¥å•è¯"},null,512)),[[e.vModelText,h.name]]):(e.openBlock(),e.createElementBlock("view",{key:0,class:"word-name"},e.toDisplayString(r.value.name||"åŠ è½½ä¸­..."),1)),g.value?(e.openBlock(),e.createElementBlock("view",{key:3,class:"pos-selection"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(x,((t,o)=>e.createElementVNode("view",{key:o,class:e.normalizeClass(["pos-item-small",{active:h.pos.includes(t.value)}]),onClick:e=>(e=>{const t=h.pos.indexOf(e);-1===t?h.pos.push(e):h.pos.splice(t,1)})(t.value)},e.toDisplayString(t.label),11,["onClick"]))),64))])):(e.openBlock(),e.createElementBlock("view",{key:2,class:"word-pos-tag"},e.toDisplayString(r.value.pos||""),1))]),u.value||v.value.show||g.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"refresh-btn",onClick:W},[e.createElementVNode("text",{class:"refresh-icon"},"â†»")]))],2),u.value||v.value.show?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("scroll-view",{key:0,"scroll-y":"",class:"content-area"},[e.createElementVNode("view",{class:"detail-section"},[e.createElementVNode("view",{class:"section-title"},"ä¸­æ–‡é‡Šä¹‰"),g.value?e.withDirectives((e.openBlock(),e.createElementBlock("textarea",{key:1,class:"edit-textarea","onUpdate:modelValue":a[1]||(a[1]=e=>h.meaning=e),placeholder:"è¾“å…¥ä¸­æ–‡é‡Šä¹‰"},null,512)),[[e.vModelText,h.meaning]]):(e.openBlock(),e.createElementBlock("view",{key:0,class:"section-content chinese-meaning"},e.toDisplayString(r.value.meaning||"æš‚æ— é‡Šä¹‰"),1))]),e.createElementVNode("view",{class:"detail-section"},[e.createElementVNode("view",{class:"section-title"},[e.createTextVNode(" ä¾‹å¥ "),!g.value&&r.value.examples&&r.value.examples.length?(e.openBlock(),e.createElementBlock("span",{key:0},"("+e.toDisplayString(r.value.examples.length)+")",1)):e.createCommentVNode("",!0),g.value?(e.openBlock(),e.createElementBlock("text",{key:1,class:"add-btn",onClick:j},"+ æ·»åŠ ä¾‹å¥")):e.createCommentVNode("",!0)]),!g.value&&r.value.examples&&r.value.examples.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"example-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value.examples,((t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"example-item",key:o},[e.createElementVNode("view",{class:"example-number"},e.toDisplayString(o+1),1),e.createElementVNode("view",{class:"example-content"},[e.createElementVNode("view",{class:"example-en"},[e.createElementVNode("text",{innerHTML:y(t.en,r.value.name)},null,8,["innerHTML"])]),e.createElementVNode("view",{class:"example-zh"},e.toDisplayString(t.zh),1)])])))),128))])):e.createCommentVNode("",!0),g.value?(e.openBlock(),e.createElementBlock("view",{key:1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.examples,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:"example-edit-item"},[e.createElementVNode("view",{class:"example-edit-header"},[e.createElementVNode("view",{class:"example-number"},e.toDisplayString(o+1),1),e.createElementVNode("view",{class:"example-delete",onClick:e=>(e=>{h.examples.splice(e,1)})(o)},"åˆ é™¤",8,["onClick"])]),e.withDirectives(e.createElementVNode("textarea",{class:"edit-textarea","onUpdate:modelValue":e=>t.en=e,placeholder:"è¾“å…¥è‹±æ–‡ä¾‹å¥"},null,8,["onUpdate:modelValue"]),[[e.vModelText,t.en]]),e.withDirectives(e.createElementVNode("textarea",{class:"edit-textarea","onUpdate:modelValue":e=>t.zh=e,placeholder:"è¾“å…¥ä¸­æ–‡ç¿»è¯‘"},null,8,["onUpdate:modelValue"]),[[e.vModelText,t.zh]])])))),128))])):e.createCommentVNode("",!0),!g.value&&(!r.value.examples||0===r.value.examples.length)||g.value&&0===h.examples.length?(e.openBlock(),e.createElementBlock("view",{key:2,class:"empty-module"}," æš‚æ— ä¾‹å¥ ")):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"detail-section"},[e.createElementVNode("view",{class:"section-title"},[e.createTextVNode(" ç›¸å…³å•è¯ "),!g.value&&r.value.relatedWords&&r.value.relatedWords.length?(e.openBlock(),e.createElementBlock("span",{key:0},"("+e.toDisplayString(r.value.relatedWords.length)+")",1)):e.createCommentVNode("",!0),g.value?(e.openBlock(),e.createElementBlock("text",{key:1,class:"add-btn",onClick:q},"+ æ·»åŠ ç›¸å…³å•è¯")):e.createCommentVNode("",!0)]),!g.value&&r.value.relatedWords&&r.value.relatedWords.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"related-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value.relatedWords,((o,a)=>(e.openBlock(),e.createElementBlock("view",{class:"related-item",key:a,onClick:e=>(e=>{if(!e)return t("error","at pages/worddetail/index.vue:1068","æ— æ•ˆçš„å•è¯IDï¼Œæ— æ³•è·³è½¬"),void uni.showToast({title:"æ— æ³•åŠ è½½å•è¯",icon:"none"});t("log","at pages/worddetail/index.vue:1076",`å‡†å¤‡è·³è½¬åˆ°å•è¯ID: ${e}ï¼Œç±»å‹: ${typeof e}`),k[e]&&(t("log","at pages/worddetail/index.vue:1080",`æ¸…é™¤IDä¸º${e}çš„ç¼“å­˜`),delete k[e]);try{const o=uni.getStorageSync(C);if(o){const a=JSON.parse(o),r=(Array.isArray(a)?a:a&&Array.isArray(a.words)?a.words:[]).find((t=>t.id===e));if(r)t("log","at pages/worddetail/index.vue:1095",`ç›®æ ‡å•è¯å­˜åœ¨äºæœ¬åœ°å•è¯åº“ä¸­: ${r.name}`);else{t("warn","at pages/worddetail/index.vue:1097",`IDä¸º${e}çš„å•è¯åœ¨æœ¬åœ°å•è¯åº“ä¸­ä¸å­˜åœ¨`);const o=n.find((t=>t.id===e));if(o)return t("warn","at pages/worddetail/index.vue:1102",`IDä¸º${e}çš„å•è¯åœ¨mockWordsä¸­å­˜åœ¨(${o.name})ï¼Œä½†ä¸åœ¨æœ¬åœ°å•è¯åº“ä¸­`),void uni.showModal({title:"å•è¯ä¸å­˜åœ¨",content:`æ‚¨å°è¯•è®¿é—®çš„å•è¯"${o.name}"ä¸åœ¨æ‚¨çš„å•è¯åº“ä¸­ï¼Œæ˜¯å¦ä»è¦ç»§ç»­ï¼Ÿ`,confirmText:"ç»§ç»­",cancelText:"å–æ¶ˆ",success:t=>{t.confirm&&B(e)}})}}}catch(o){t("error","at pages/worddetail/index.vue:1121","æ£€æŸ¥æœ¬åœ°å•è¯åº“å‡ºé”™:",o)}B(e)})(o.id)},[e.createElementVNode("view",{class:"related-word-main"},[e.createElementVNode("text",{class:"related-word-name"},e.toDisplayString(o.name),1),o.pos?(e.openBlock(),e.createElementBlock("text",{key:0,class:"related-pos"},e.toDisplayString(o.pos),1)):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"related-word-meaning"},e.toDisplayString(o.meaning),1),e.createElementVNode("text",{class:"related-arrow"},"â†’")],8,["onClick"])))),128))])):e.createCommentVNode("",!0),g.value?(e.openBlock(),e.createElementBlock("view",{key:1},[F.value?(e.openBlock(),e.createElementBlock("view",{key:0,class:"related-word-search"},[e.createElementVNode("view",{class:"search-header"},[e.withDirectives(e.createElementVNode("input",{class:"search-input","onUpdate:modelValue":a[2]||(a[2]=e=>U.value=e),placeholder:"è¾“å…¥å•è¯åç§°æœç´¢",focus:"",onInput:J},null,544),[[e.vModelText,U.value]]),e.createElementVNode("text",{class:"search-close",onClick:z},"å…³é—­")]),R.value.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"search-results"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(R.value,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:"search-result-item",onClick:e=>{return o=t,void(h.relatedWords.some((e=>e.id===o.id))?uni.showToast({title:"å·²æ·»åŠ è¯¥å•è¯",icon:"none",duration:1e3}):o.id!==r.value.id?(h.relatedWords.push({id:o.id,name:o.name,pos:o.pos,meaning:o.meaning}),U.value="",R.value=[],F.value=!1,uni.showToast({title:"æ·»åŠ æˆåŠŸ",icon:"success",duration:1e3})):uni.showToast({title:"ä¸èƒ½æ·»åŠ å½“å‰å•è¯",icon:"none",duration:1e3}));var o}},[e.createElementVNode("view",{class:"result-word-name"},e.toDisplayString(t.name),1),e.createElementVNode("view",{class:"result-word-pos"},e.toDisplayString(t.pos),1),e.createElementVNode("view",{class:"result-word-meaning"},e.toDisplayString(t.meaning),1)],8,["onClick"])))),128))])):(e.openBlock(),e.createElementBlock("view",{key:1,class:"no-search-results"},[e.createElementVNode("text",null,e.toDisplayString(U.value?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å•è¯":"è¯·è¾“å…¥å•è¯åç§°è¿›è¡Œæœç´¢"),1)]))])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.relatedWords,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:"related-edit-item"},[e.createElementVNode("view",{class:"related-edit-header"},[e.createElementVNode("view",{class:"related-edit-number"},e.toDisplayString(o+1),1),e.createElementVNode("view",{class:"related-edit-delete",onClick:e=>(e=>{h.relatedWords.splice(e,1)})(o)},"åˆ é™¤",8,["onClick"])]),e.withDirectives(e.createElementVNode("input",{class:"edit-input","onUpdate:modelValue":e=>t.name=e,placeholder:"ç›¸å…³å•è¯",disabled:""},null,8,["onUpdate:modelValue"]),[[e.vModelText,t.name]]),e.withDirectives(e.createElementVNode("input",{class:"edit-input","onUpdate:modelValue":e=>t.pos=e,placeholder:"è¯æ€§",disabled:""},null,8,["onUpdate:modelValue"]),[[e.vModelText,t.pos]]),e.withDirectives(e.createElementVNode("input",{class:"edit-input","onUpdate:modelValue":e=>t.meaning=e,placeholder:"ä¸­æ–‡é‡Šä¹‰",disabled:""},null,8,["onUpdate:modelValue"]),[[e.vModelText,t.meaning]])])))),128))])):e.createCommentVNode("",!0),!g.value&&(!r.value.relatedWords||0===r.value.relatedWords.length)||g.value&&0===h.relatedWords.length?(e.openBlock(),e.createElementBlock("view",{key:2,class:"empty-module"}," æš‚æ— ç›¸å…³å•è¯ ")):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"detail-section"},[e.createElementVNode("view",{class:"section-title"},[e.createTextVNode(" æ³¨æ„äº‹é¡¹ "),g.value?(e.openBlock(),e.createElementBlock("text",{key:0,class:"add-btn",onClick:$},"+ æ·»åŠ æ³¨æ„äº‹é¡¹")):e.createCommentVNode("",!0)]),!g.value&&r.value.notes&&r.value.notes.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"notes-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value.notes,((t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"note-item",key:o},[e.createElementVNode("view",{class:"note-bullet"},"â€¢"),e.createElementVNode("view",{class:"note-content"},e.toDisplayString(t),1)])))),128))])):e.createCommentVNode("",!0),g.value?(e.openBlock(),e.createElementBlock("view",{key:1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.notes,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:o,class:"note-edit-item"},[e.createElementVNode("view",{class:"note-edit-header"},[e.createElementVNode("view",{class:"note-bullet"},"â€¢"),e.createElementVNode("view",{class:"note-edit-delete",onClick:e=>(e=>{h.notes.splice(e,1)})(o)},"åˆ é™¤",8,["onClick"])]),e.withDirectives(e.createElementVNode("textarea",{class:"edit-textarea","onUpdate:modelValue":e=>h.notes[o]=e,placeholder:"è¾“å…¥æ³¨æ„äº‹é¡¹"},null,8,["onUpdate:modelValue"]),[[e.vModelText,h.notes[o]]])])))),128))])):!g.value||h.notes&&0!==h.notes.length?!g.value&&r.value.commonErrors&&r.value.commonErrors.length>0?(e.openBlock(),e.createElementBlock("view",{key:3,class:"empty-module"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value.commonErrors,((t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"note-item",key:o},[e.createElementVNode("view",{class:"note-bullet error-bullet"},"âœ˜"),e.createElementVNode("view",{class:"note-content"},e.toDisplayString(t),1)])))),128))])):g.value||r.value.notes&&0!==r.value.notes.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:4,class:"empty-module"}," æš‚æ— æ³¨æ„äº‹é¡¹ ")):(e.openBlock(),e.createElementBlock("view",{key:2,class:"empty-module"}," æš‚æ— æ³¨æ„äº‹é¡¹ "))])])),u.value&&!v.value.show?(e.openBlock(),e.createElementBlock("view",{key:1,class:"skeleton"},[e.createElementVNode("view",{class:"skeleton-section"},[e.createElementVNode("view",{class:"skeleton-title"}),e.createElementVNode("view",{class:"skeleton-content"})]),e.createElementVNode("view",{class:"skeleton-section"},[e.createElementVNode("view",{class:"skeleton-title"}),e.createElementVNode("view",{class:"skeleton-content"}),e.createElementVNode("view",{class:"skeleton-content"})]),e.createElementVNode("view",{class:"skeleton-section"},[e.createElementVNode("view",{class:"skeleton-title"}),e.createElementVNode("view",{class:"skeleton-item"}),e.createElementVNode("view",{class:"skeleton-item"})])])):e.createCommentVNode("",!0),v.value.show?(e.openBlock(),e.createElementBlock("view",{key:2,class:"error-container"},[e.createElementVNode("view",{class:"error-icon"},"âŒ"),e.createElementVNode("view",{class:"error-message"},e.toDisplayString(v.value.message),1),e.createElementVNode("view",{class:"error-actions"},[e.createElementVNode("button",{class:"retry-btn",onClick:S},"é‡è¯•"),e.createElementVNode("button",{class:"back-btn",onClick:T},"è¿”å›")])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["actions",{disabled:u.value||v.value.show}])},[g.value?(e.openBlock(),e.createElementBlock("button",{key:1,class:"action-btn save",onClick:A,"hover-class":"btn-hover"},"ä¿å­˜")):(e.openBlock(),e.createElementBlock("button",{key:0,class:"action-btn edit",onClick:D,"hover-class":"btn-hover",disabled:u.value||v.value.show},"ç¼–è¾‘",8,["disabled"])),g.value?(e.openBlock(),e.createElementBlock("button",{key:3,class:"action-btn cancel",onClick:I,"hover-class":"btn-hover"},"å–æ¶ˆ")):(e.openBlock(),e.createElementBlock("button",{key:2,class:"action-btn delete",onClick:M,"hover-class":"btn-hover",disabled:u.value||v.value.show},"åˆ é™¤",8,["disabled"]))],2)]))}};const T=k({name:"LoadingError",props:{show:{type:Boolean,default:!1},message:{type:String,default:"åŠ è½½å¤±è´¥"}},emits:["retry","dismiss"]},[["render",function(t,o,a,n,r,s){return a.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:"loading-error"},[e.createElementVNode("view",{class:"error-container"},[e.createElementVNode("text",{class:"error-icon"},"!"),e.createElementVNode("text",{class:"error-text"},e.toDisplayString(a.message||"åŠ è½½å¤±è´¥"),1),e.createElementVNode("view",{class:"error-actions"},[e.createElementVNode("button",{class:"retry-btn",onClick:o[0]||(o[0]=e=>t.$emit("retry"))},"é‡è¯•"),e.createElementVNode("button",{class:"dismiss-btn",onClick:o[1]||(o[1]=e=>t.$emit("dismiss"))},"å…³é—­")])])])):e.createCommentVNode("",!0)}],["__scopeId","data-v-16d04f32"]]);const B=k({components:{LoadingError:T},setup(){const o=e.ref([]),a=e.ref(""),n=e.ref(!1),r=e.ref(!1),s=e.ref([]),l=async()=>{try{if(!a.value)return void(s.value=o.value);const n=await(e=a.value,new Promise((o=>{try{const a=g();if(!e)return void o(a);const n=e.toLowerCase(),r=a.filter((e=>e.content&&e.content.toLowerCase().includes(n)||e.note&&e.note.toLowerCase().includes(n)));t("log","at services/errorbook.js:360",`æœç´¢å…³é”®è¯ "${e}" æ‰¾åˆ° ${r.length} æ¡ç»“æœ`),o(r)}catch(a){t("error","at services/errorbook.js:363","æœç´¢é”™è¯¯è®°å½•å¤±è´¥:",a),o([])}})));s.value=n}catch(n){t("error","at pages/errorbook/index.vue:191","æœç´¢é”™è¯¯:",n),s.value=[]}var e},i=e.ref(!1),d=e.ref(!1),m=e.ref(!1),w=e.ref(!1),h=e.ref({id:"",content:"",translation:"",word:"",note:"",createTime:"",updateTime:""}),x=e.ref(!1),f=e.ref("æ•°æ®åŠ è½½å¤±è´¥"),y=()=>{i.value=!1,d.value=!1,k()},k=()=>{h.value={id:"",content:"",translation:"",word:"",note:"",createTime:"",updateTime:""}},E=async()=>{if(!n.value){t("log","at pages/errorbook/index.vue:271","å¼€å§‹åŠ è½½é”™è¯¯è®°å½•æ•°æ®..."),n.value=!0;try{t("log","at pages/errorbook/index.vue:275","è°ƒç”¨é”™è¯¯è®°å½•æœåŠ¡ getErrorList()...");const e=await v();t("log","at pages/errorbook/index.vue:277","æ”¶åˆ°é”™è¯¯è®°å½•æ•°æ®:",e),e&&e.length>0&&t("log","at pages/errorbook/index.vue:281","ç¬¬ä¸€æ¡é”™è¯¯è®°å½•ç¤ºä¾‹:",JSON.stringify(e[0])),o.value=e,s.value=e,t("log","at pages/errorbook/index.vue:287","åŠ è½½äº†é”™è¯¯æœ¬æ•°æ®ï¼Œæ¡æ•°:",e.length),N()}catch(e){t("error","at pages/errorbook/index.vue:290","åŠ è½½é”™è¯¯æœ¬æ•°æ®å¤±è´¥:",e),x.value=!0,f.value="åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•"}finally{n.value=!1,r.value=!1}}},N=()=>{try{const e=getApp().globalData||{},a=e.errorBookCount||0;e.errorBookCount=o.value.length,t("log","at pages/errorbook/index.vue:311",`å·²æ›´æ–°ä¸»é¡µé”™è¯¯æœ¬è®¡æ•°: ${a} -> ${e.errorBookCount}`),"function"==typeof e.updateCounters&&(e.updateCounters(),t("log","at pages/errorbook/index.vue:316","å·²è§¦å‘å…¨å±€è®¡æ•°å™¨æ›´æ–°")),uni.$emit("errorbook-count-updated",{count:o.value.length}),t("log","at pages/errorbook/index.vue:323","å·²å‘é€é”™é¢˜æœ¬è®¡æ•°æ›´æ–°äº‹ä»¶")}catch(e){t("error","at pages/errorbook/index.vue:325","æ›´æ–°ä¸»é¡µé”™è¯¯æœ¬è®¡æ•°å¤±è´¥:",e)}};return e.onMounted((()=>{E()})),{errorList:o,filteredErrorList:s,searchText:a,isLoading:n,isRefreshing:r,showAddModal:i,showEditModal:d,showDetailModal:m,showDeleteModal:w,currentError:h,onSearch:async e=>{a.value=e.detail.value,await l()},clearSearch:async()=>{a.value="",s.value=o.value},editError:e=>{h.value={...e},m.value=!1,d.value=!0,i.value=!0},viewErrorDetail:async e=>{try{const a=await(o=e.id,new Promise((a=>{try{const e=g().find((e=>e.id===o))||null;e?t("log","at services/errorbook.js:144","æ‰¾åˆ°é”™è¯¯è®°å½•:",o):t("log","at services/errorbook.js:146","æœªæ‰¾åˆ°é”™è¯¯è®°å½•:",o),a(e)}catch(e){t("error","at services/errorbook.js:151","è·å–é”™è¯¯è®°å½•è¯¦æƒ…å¤±è´¥:",e),a(null)}})));a?(h.value=a,m.value=!0):uni.showToast({title:"è®°å½•ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤",icon:"none"})}catch(a){t("error","at pages/errorbook/index.vue:358","è·å–é”™è¯¯è¯¦æƒ…å¤±è´¥:",a),uni.showToast({title:"è·å–è¯¦æƒ…å¤±è´¥",icon:"none"})}var o},confirmDelete:e=>{h.value={...e},w.value=!0},deleteError:async()=>{try{await(e=h.value.id,new Promise((o=>{try{const n=uni.getStorageSync(p);if(!n)return t("warn","at services/errorbook.js:296","æ²¡æœ‰æ‰¾åˆ°é”™è¯¯è®°å½•æ•°æ®"),void o(!1);try{const a=JSON.parse(n);if(!Array.isArray(a))return t("warn","at services/errorbook.js:305","é”™è¯¯è®°å½•æ•°æ®æ ¼å¼ä¸æ­£ç¡®"),void o(!1);const r=a.filter((t=>t.id!==e));if(r.length===a.length)return t("warn","at services/errorbook.js:314","æœªæ‰¾åˆ°è¦åˆ é™¤çš„é”™è¯¯è®°å½•:",e),void o(!1);uni.setStorageSync(p,JSON.stringify(r)),t("log","at services/errorbook.js:321","åˆ é™¤é”™è¯¯è®°å½•æˆåŠŸ, ID:",e),o(!0)}catch(a){t("error","at services/errorbook.js:325","è§£æé”™è¯¯è®°å½•æ•°æ®å¤±è´¥:",a),o(!1)}}catch(n){t("error","at services/errorbook.js:329","åˆ é™¤é”™è¯¯è®°å½•å¤±è´¥:",n),o(!1)}})))?(o.value.length>0&&(o.value=o.value.filter((e=>e.id!==h.value.id)),s.value=s.value.filter((e=>e.id!==h.value.id)),N(),t("log","at pages/errorbook/index.vue:387","æœ¬åœ°æ•°æ®å’Œé¦–é¡µè®¡æ•°å·²æ›´æ–°")),await E(),w.value=!1,uni.showToast({title:"åˆ é™¤æˆåŠŸ",icon:"success"})):uni.showToast({title:"åˆ é™¤å¤±è´¥",icon:"none"})}catch(a){t("error","at pages/errorbook/index.vue:405","åˆ é™¤é”™è¯¯è®°å½•å¤±è´¥:",a),uni.showToast({title:"åˆ é™¤å¤±è´¥",icon:"none"})}var e},saveError:async()=>{var e;if(h.value.content.trim())try{let n=!1;if(h.value.id){const e=await(e=>new Promise((o=>{try{const n=uni.getStorageSync(p);if(!n)return t("warn","at services/errorbook.js:217","æ²¡æœ‰æ‰¾åˆ°é”™è¯¯è®°å½•æ•°æ®"),void o(!1);try{const a=JSON.parse(n);if(!Array.isArray(a))return t("warn","at services/errorbook.js:226","é”™è¯¯è®°å½•æ•°æ®æ ¼å¼ä¸æ­£ç¡®"),void o(!1);const r=a.findIndex((t=>t.id===e.id));if(-1===r)return t("warn","at services/errorbook.js:235","æœªæ‰¾åˆ°è¦æ›´æ–°çš„é”™è¯¯è®°å½•:",e.id),void o(!1);const s=a[r],l={...s};"content"in s?l.content=e.content:"title"in s&&(l.title=e.content),l.note=e.note||s.note||"",l.updateTime=(new Date).toISOString(),a[r]=l,uni.setStorageSync(p,JSON.stringify(a)),t("log","at services/errorbook.js:271","æ›´æ–°é”™è¯¯è®°å½•æˆåŠŸ, ID:",e.id),o(!0)}catch(a){t("error","at services/errorbook.js:275","è§£æé”™è¯¯è®°å½•æ•°æ®å¤±è´¥:",a),o(!1)}}catch(n){t("error","at services/errorbook.js:279","æ›´æ–°é”™è¯¯è®°å½•å¤±è´¥:",n),o(!1)}})))(h.value);if(!e)return void uni.showToast({title:"æ›´æ–°å¤±è´¥",icon:"none"});{const e=o.value.findIndex((e=>e.id===h.value.id));if(-1!==e){o.value[e]={...h.value};const a=s.value.findIndex((e=>e.id===h.value.id));-1!==a&&(s.value[a]={...h.value}),t("log","at pages/errorbook/index.vue:469","å·²æ›´æ–°æœ¬åœ°è®°å½•")}uni.showToast({title:"æ›´æ–°æˆåŠŸ",icon:"success"})}}else{const r=await(e=h.value,new Promise((o=>{try{const n=uni.getStorageSync(p);let r=[];try{n&&(r=JSON.parse(n),Array.isArray(r)||(r=[]))}catch(a){t("error","at services/errorbook.js:177","è§£æç°æœ‰æ•°æ®å¤±è´¥ï¼Œå°†åˆ›å»ºæ–°çš„æ•°ç»„",a),r=[]}const s={id:c(),content:e.content||"",translation:"",word:"",note:e.note||"",createTime:(new Date).toISOString()};r.unshift(s),uni.setStorageSync(p,JSON.stringify(r)),t("log","at services/errorbook.js:196","æ·»åŠ é”™è¯¯è®°å½•æˆåŠŸ, ID:",s.id),o(s)}catch(n){t("error","at services/errorbook.js:200","æ·»åŠ é”™è¯¯è®°å½•å¤±è´¥:",n),o(null)}})));if(!r)return void uni.showToast({title:"æ·»åŠ å¤±è´¥",icon:"none"});r&&(n=!0,o.value.unshift(r),a.value||(s.value=[...o.value]),N(),t("log","at pages/errorbook/index.vue:442","å·²æ·»åŠ æ–°è®°å½•å¹¶æ›´æ–°é¦–é¡µè®¡æ•°")),uni.showToast({title:"æ·»åŠ æˆåŠŸ",icon:"success"})}await E(),y()}catch(n){t("error","at pages/errorbook/index.vue:490","ä¿å­˜é”™è¯¯è®°å½•å¤±è´¥:",n),uni.showToast({title:"æ“ä½œå¤±è´¥",icon:"none"})}else uni.showToast({title:"å†…å®¹ä¸èƒ½ä¸ºç©º",icon:"none"})},formatDate:e=>u(e),loadData:E,closeModal:y,showError:x,errorMessage:f,onScroll:e=>{},onPulling:()=>{t("log","at pages/errorbook/index.vue:228","ç”¨æˆ·ä¸‹æ‹‰ä¸­...")},onRefresh:()=>{t("log","at pages/errorbook/index.vue:232","è§¦å‘åˆ·æ–°"),r.value=!0,E()},onRestore:()=>{t("log","at pages/errorbook/index.vue:238","åˆ·æ–°å®Œæˆï¼Œæ§ä»¶æ¢å¤"),r.value=!1},onAbort:()=>{t("log","at pages/errorbook/index.vue:243","ç”¨æˆ·ç»ˆæ­¢äº†åˆ·æ–°"),r.value=!1},handleRetry:()=>{x.value=!1,E()},dismissError:()=>{x.value=!1}}}},[["render",function(t,o,a,n,r,s){const l=e.resolveComponent("loading-error");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"content-container"},[e.createElementVNode("view",{class:"search-bar"},[e.createElementVNode("view",{class:"search-box"},[e.createElementVNode("text",{class:"icon"},"ğŸ”"),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>n.searchText=e),placeholder:"æœç´¢",onInput:o[1]||(o[1]=(...e)=>n.onSearch&&n.onSearch(...e))},null,544),[[e.vModelText,n.searchText]]),n.searchText?(e.openBlock(),e.createElementBlock("text",{key:0,class:"icon",onClick:o[2]||(o[2]=(...e)=>n.clearSearch&&n.clearSearch(...e))},"âœ–")):e.createCommentVNode("",!0)])]),e.createElementVNode("view",{class:"action-bar"},[e.createElementVNode("button",{class:"add-btn",onClick:o[3]||(o[3]=e=>n.showAddModal=!0)},[e.createElementVNode("text",{class:"icon"},"+"),e.createTextVNode(" æ·»åŠ  ")])]),e.createElementVNode("scroll-view",{class:"error-list","scroll-y":"",onScroll:o[5]||(o[5]=(...e)=>n.onScroll&&n.onScroll(...e)),"scroll-with-animation":!0,"enable-back-to-top":!0,"show-scrollbar":!0,"refresher-enabled":!0,"refresher-triggered":n.isRefreshing,onRefresherpulling:o[6]||(o[6]=(...e)=>n.onPulling&&n.onPulling(...e)),onRefresherrefresh:o[7]||(o[7]=(...e)=>n.onRefresh&&n.onRefresh(...e)),onRefresherrestore:o[8]||(o[8]=(...e)=>n.onRestore&&n.onRestore(...e)),onRefresherabort:o[9]||(o[9]=(...e)=>n.onAbort&&n.onAbort(...e))},[n.errorList&&n.errorList.length>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(n.filteredErrorList,((t,o)=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:"error-item"},[e.createElementVNode("view",{class:"error-content",onClick:e=>n.viewErrorDetail(t)},[e.createElementVNode("view",{class:"error-title"},e.toDisplayString(t.content),1),t.note?(e.openBlock(),e.createElementBlock("view",{key:0,class:"error-note"},"å¤‡æ³¨: "+e.toDisplayString(t.note),1)):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"error-date"},e.toDisplayString(n.formatDate(t.createTime)),1)],8,["onClick"]),e.createElementVNode("view",{class:"error-actions"},[e.createElementVNode("text",{class:"icon icon-edit",onClick:e=>n.editError(t)},"âœï¸",8,["onClick"]),e.createElementVNode("text",{class:"icon icon-delete",onClick:e=>n.confirmDelete(t)},"ğŸ—‘ï¸",8,["onClick"])])])))),128)):0!==n.errorList.length||n.isLoading?n.filteredErrorList&&0===n.filteredErrorList.length&&n.searchText&&!n.isLoading?(e.openBlock(),e.createElementBlock("view",{key:2,class:"empty-result"},[e.createElementVNode("image",{src:y,mode:"aspectFit"}),e.createElementVNode("text",null,"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„é”™è¯¯è®°å½•"),e.createElementVNode("button",{class:"small-btn",onClick:o[4]||(o[4]=(...e)=>n.clearSearch&&n.clearSearch(...e))},"æ¸…é™¤æœç´¢")])):e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:1,class:"empty-result"},[e.createElementVNode("image",{src:y,mode:"aspectFit"}),e.createElementVNode("text",null,"é”™é¢˜æœ¬ä¸ºç©º"),e.createElementVNode("text",{class:"empty-tip"},'ç‚¹å‡»"æ·»åŠ "æŒ‰é’®æ·»åŠ å†…å®¹')]))],40,["refresher-triggered"])]),n.showAddModal?(e.openBlock(),e.createElementBlock("view",{key:0,class:"modal"},[e.createElementVNode("view",{class:"modal-content"},[e.createElementVNode("view",{class:"modal-header"},[e.createElementVNode("text",null,e.toDisplayString(n.showEditModal?"ç¼–è¾‘é”™è¯¯è®°å½•":"æ·»åŠ é”™è¯¯è®°å½•"),1),e.createElementVNode("text",{class:"icon",onClick:o[10]||(o[10]=(...e)=>n.closeModal&&n.closeModal(...e))},"âœ–")]),e.createElementVNode("view",{class:"modal-body"},[e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"label"},"å†…å®¹"),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[11]||(o[11]=e=>n.currentError.content=e),placeholder:"è¾“å…¥é”™è¯¯å†…å®¹",class:"textarea"},null,512),[[e.vModelText,n.currentError.content]])]),e.createElementVNode("view",{class:"form-item"},[e.createElementVNode("text",{class:"label"},"å¤‡æ³¨"),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[12]||(o[12]=e=>n.currentError.note=e),placeholder:"è¾“å…¥å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰",class:"textarea"},null,512),[[e.vModelText,n.currentError.note]])])]),e.createElementVNode("view",{class:"modal-footer"},[e.createElementVNode("button",{class:"cancel-btn",onClick:o[13]||(o[13]=(...e)=>n.closeModal&&n.closeModal(...e))},"å–æ¶ˆ"),e.createElementVNode("button",{class:"submit-btn",onClick:o[14]||(o[14]=(...e)=>n.saveError&&n.saveError(...e))},"ä¿å­˜")])])])):e.createCommentVNode("",!0),n.showDeleteModal?(e.openBlock(),e.createElementBlock("view",{key:1,class:"modal"},[e.createElementVNode("view",{class:"modal-content"},[e.createElementVNode("view",{class:"modal-header"},[e.createElementVNode("text",null,"åˆ é™¤é”™è¯¯è®°å½•"),e.createElementVNode("text",{class:"icon",onClick:o[15]||(o[15]=e=>n.showDeleteModal=!1)},"âœ–")]),e.createElementVNode("view",{class:"modal-body"},[e.createElementVNode("text",null,"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé”™è¯¯è®°å½•å—ï¼Ÿ"),e.createElementVNode("text",{class:"delete-title"},e.toDisplayString(n.currentError.content),1)]),e.createElementVNode("view",{class:"modal-footer"},[e.createElementVNode("button",{class:"cancel-btn",onClick:o[16]||(o[16]=e=>n.showDeleteModal=!1)},"å–æ¶ˆ"),e.createElementVNode("button",{class:"delete-btn",onClick:o[17]||(o[17]=(...e)=>n.deleteError&&n.deleteError(...e))},"åˆ é™¤")])])])):e.createCommentVNode("",!0),n.showDetailModal?(e.openBlock(),e.createElementBlock("view",{key:2,class:"modal"},[e.createElementVNode("view",{class:"modal-content detail-modal"},[e.createElementVNode("view",{class:"modal-header"},[e.createElementVNode("text",null,"é”™è¯¯è¯¦æƒ…"),e.createElementVNode("text",{class:"icon",onClick:o[18]||(o[18]=e=>n.showDetailModal=!1)},"âœ–")]),e.createElementVNode("view",{class:"modal-body"},[e.createElementVNode("view",{class:"detail-title"},e.toDisplayString(n.currentError.content),1),n.currentError.note?(e.openBlock(),e.createElementBlock("view",{key:0,class:"detail-note"},[e.createElementVNode("text",{class:"note-label"},"å¤‡æ³¨ï¼š"),e.createTextVNode(" "+e.toDisplayString(n.currentError.note),1)])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"detail-date"},"è®°å½•æ—¶é—´ï¼š"+e.toDisplayString(n.formatDate(n.currentError.createTime)),1),n.currentError.updateTime?(e.openBlock(),e.createElementBlock("view",{key:1,class:"detail-date"},"æ›´æ–°æ—¶é—´ï¼š"+e.toDisplayString(n.formatDate(n.currentError.updateTime)),1)):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"modal-footer"},[e.createElementVNode("button",{class:"cancel-btn",onClick:o[19]||(o[19]=e=>n.showDetailModal=!1)},"å…³é—­"),e.createElementVNode("button",{class:"edit-btn",onClick:o[20]||(o[20]=e=>n.editError(n.currentError))},"ç¼–è¾‘")])])])):e.createCommentVNode("",!0),e.createVNode(l,{show:n.showError,message:n.errorMessage,onRetry:n.handleRetry,onDismiss:n.dismissError},null,8,["show","message","onRetry","onDismiss"])])}],["__scopeId","data-v-06cd56aa"]]);__definePage("pages/index/index",f),__definePage("pages/wordlist/index",N),__definePage("pages/add/index",V),__definePage("pages/settings/index",b),__definePage("pages/worddetail/index",S),__definePage("pages/errorbook/index",B);const D="reciter_words",A=[{id:1,name:"apple",pos:"n.",meaning:"è‹¹æœ"},{id:2,name:"banana",pos:"n.",meaning:"é¦™è•‰"},{id:3,name:"book",pos:"n.",meaning:"ä¹¦ç±"},{id:4,name:"cat",pos:"n.",meaning:"çŒ«"},{id:5,name:"dog",pos:"n.",meaning:"ç‹—"},{id:6,name:"eat",pos:"v.",meaning:"åƒ"},{id:7,name:"friend",pos:"n.",meaning:"æœ‹å‹"},{id:8,name:"go",pos:"v.",meaning:"å»"},{id:9,name:"happy",pos:"adj.",meaning:"å¿«ä¹çš„"},{id:10,name:"in",pos:"prep.",meaning:"åœ¨...é‡Œ"},{id:11,name:"jump",pos:"v.",meaning:"è·³è·ƒ"},{id:12,name:"kind",pos:"adj.",meaning:"å‹å–„çš„"},{id:13,name:"love",pos:"v./n.",meaning:"çˆ±ï¼›å–œçˆ±"},{id:14,name:"moon",pos:"n.",meaning:"æœˆäº®"},{id:15,name:"nice",pos:"adj.",meaning:"å¥½çš„ï¼›å‹å¥½çš„"},{id:16,name:"open",pos:"v./adj.",meaning:"æ‰“å¼€ï¼›å¼€ç€çš„"},{id:17,name:"pen",pos:"n.",meaning:"é’¢ç¬”"},{id:18,name:"question",pos:"n.",meaning:"é—®é¢˜"},{id:19,name:"run",pos:"v.",meaning:"è·‘"},{id:20,name:"sun",pos:"n.",meaning:"å¤ªé˜³"},{id:21,name:"time",pos:"n.",meaning:"æ—¶é—´"},{id:22,name:"umbrella",pos:"n.",meaning:"é›¨ä¼"},{id:23,name:"very",pos:"adv.",meaning:"éå¸¸"},{id:24,name:"water",pos:"n.",meaning:"æ°´"},{id:25,name:"xylophone",pos:"n.",meaning:"æœ¨ç´"},{id:26,name:"yellow",pos:"adj.",meaning:"é»„è‰²çš„"},{id:27,name:"zoo",pos:"n.",meaning:"åŠ¨ç‰©å›­"}],I={globalData:{editWordId:null,editMode:null},onLaunch:function(){t("log","at App.vue:42","App Launch"),this.initData(),this.setupErrorHandling(),this.suppressNetworkErrors(),this.setupEmergencyUnlock()},onShow:function(){t("log","at App.vue:57","App Show")},onHide:function(){t("log","at App.vue:60","App Hide")},methods:{initData(){t("log","at App.vue:65","æ­£åœ¨åˆå§‹åŒ–åº”ç”¨æ•°æ®...");try{const o=uni.getStorageSync(D);if(o)try{const e=JSON.parse(o);"object"==typeof e&&!0===e.forceEmpty?t("log","at App.vue:79","æ•°æ®å·²è¢«æ¸…ç©ºï¼Œä¿æŒç©ºçŠ¶æ€"):Array.isArray(e)?t("log","at App.vue:81","æœ¬åœ°å­˜å‚¨æ•°æ®æœ‰æ•ˆï¼Œå•è¯æ•°é‡:",e.length):e&&"object"==typeof e&&Array.isArray(e.words)?t("log","at App.vue:83","æœ¬åœ°å­˜å‚¨æ•°æ®æœ‰æ•ˆï¼ˆæ–°æ ¼å¼ï¼‰ï¼Œå•è¯æ•°é‡:",e.words.length):t("log","at App.vue:85","æœ¬åœ°æ•°æ®æ ¼å¼æ— æ•ˆï¼Œä½†ä¸åšè‡ªåŠ¨ä¿®å¤")}catch(e){t("error","at App.vue:89","è§£ææœ¬åœ°å­˜å‚¨æ•°æ®å¤±è´¥:",e)}else t("log","at App.vue:73","æœ¬åœ°å­˜å‚¨æ²¡æœ‰å•è¯æ•°æ®")}catch(o){t("error","at App.vue:93","åˆå§‹åŒ–æ•°æ®æ£€æŸ¥å¤±è´¥:",o)}},setupErrorHandling(){uni.onError((e=>{t("error","at App.vue:101","åº”ç”¨å‘ç”Ÿé”™è¯¯:",e)})),"undefined"!=typeof window&&window.addEventListener("unhandledrejection",(e=>{t("error","at App.vue:107","æœªå¤„ç†çš„Promiseå¼‚å¸¸:",e.reason),e.preventDefault()}));const e=uni.navigateTo;uni.navigateTo=o=>{t("log","at App.vue:116","é¡µé¢å¯¼èˆª:",o.url);const a=o.fail;return o.fail=e=>{t("error","at App.vue:119","é¡µé¢å¯¼èˆªå¤±è´¥:",e),a?a(e):uni.showToast({title:"é¡µé¢è·³è½¬å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})},e(o)}},suppressNetworkErrors(){t("log","at App.vue:135","å¢å¼ºç‰ˆï¼šç¦ç”¨æ‰€æœ‰ç½‘ç»œé”™è¯¯æç¤ºå’Œå¤„ç†"),uni.getNetworkType=function(e){return t("log","at App.vue:139","æ‹¦æˆªåˆ° getNetworkType è°ƒç”¨"),e&&e.success&&e.success({networkType:"wifi",errMsg:"getNetworkType:ok"}),{errMsg:"getNetworkType:ok",networkType:"wifi"}},uni.onNetworkStatusChange=function(e){t("log","at App.vue:154","æ‹¦æˆªåˆ° onNetworkStatusChange è°ƒç”¨"),e&&e({isConnected:!0,networkType:"wifi"})},"undefined"!=typeof plus&&plus.networkinfo&&(plus.networkinfo.getCurrentType,plus.networkinfo.getCurrentType=function(){return t("log","at App.vue:167","æ‹¦æˆª plus.networkinfo.getCurrentType"),plus.networkinfo.CONNECTION_WIFI});const e=uni.request;uni.request=function(o){if(t("log","at App.vue:175","æ‹¦æˆªåˆ° request è°ƒç”¨:",o.url||"æœªæŒ‡å®šURL"),!o.url||o.url.startsWith("local://")||o.url.includes("mock"))return t("log","at App.vue:178","æœ¬åœ°è¯·æ±‚ï¼Œæ¨¡æ‹ŸæˆåŠŸè¿”å›"),void setTimeout((()=>{o.success&&o.success({data:o.mockData||{status:"ok"},statusCode:200,errMsg:"request:ok"}),o.complete&&o.complete({errMsg:"request:ok"})}),100);const a={...o};a.fail=function(e){t("error","at App.vue:199","è¯·æ±‚å¤±è´¥è¢«æ‹¦æˆª:",e),o.success&&o.success({data:o.mockData||{status:"ok",message:"å·²å¤„ç†ç½‘ç»œé”™è¯¯"},statusCode:200,errMsg:"request:ok"}),o.complete&&o.complete({errMsg:"request:ok"})},a.timeout||(a.timeout=5e3);try{return e(a)}catch(n){t("error","at App.vue:223","è¯·æ±‚æŠ›å‡ºå¼‚å¸¸:",n),o.success&&o.success({data:o.mockData||{status:"ok",message:"å·²å¤„ç†ç½‘ç»œå¼‚å¸¸"},statusCode:200,errMsg:"request:ok"}),o.complete&&o.complete({errMsg:"request:ok"})}},uni.setNetworkTimeout&&uni.setNetworkTimeout({request:5e3,connectSocket:5e3,uploadFile:5e3,downloadFile:5e3})},emergencyReset(){t("log","at App.vue:252","æ‰§è¡Œç´§æ€¥æ•°æ®é‡ç½®");try{return uni.clearStorageSync(),t("log","at App.vue:256","å·²æ¸…é™¤æ‰€æœ‰æœ¬åœ°å­˜å‚¨"),uni.setStorageSync(D,JSON.stringify(A)),t("log","at App.vue:260","å·²é‡æ–°è®¾ç½®åˆå§‹å•è¯æ•°æ®"),uni.showToast({title:"æ•°æ®å·²é‡ç½®",icon:"success",duration:2e3}),setTimeout((()=>{try{const e=getCurrentPages();e.length>1&&uni.navigateBack({delta:e.length-1})}catch(e){t("error","at App.vue:281","æ— æ³•é‡å¯åº”ç”¨:",e)}}),2e3),!0}catch(e){return t("error","at App.vue:287","ç´§æ€¥é‡ç½®å¤±è´¥:",e),uni.showToast({title:"é‡ç½®å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é‡å¯åº”ç”¨",icon:"none",duration:2e3}),!1}},setupEmergencyUnlock(){t("log","at App.vue:301","è®¾ç½®ç´§æ€¥UIè§£é”æœºåˆ¶");let e=Date.now();"undefined"!=typeof document&&(document.addEventListener("touchstart",(()=>{e=Date.now()})),document.addEventListener("click",(()=>{e=Date.now()}))),setInterval((()=>{Date.now()-e>5e3&&(t("log","at App.vue:325","æ£€æµ‹åˆ°å¯èƒ½çš„UIé”å®šï¼Œå°è¯•æ¢å¤..."),this.checkAndUnlockUI())}),2e3),"undefined"!=typeof window&&(window.addEventListener("error",(e=>(t("error","at App.vue:333","ç´§æ€¥å¤„ç†å™¨æ•è·åˆ°å…¨å±€é”™è¯¯:",e.message),this.checkAndUnlockUI(),e.preventDefault(),!0)),!0),window.addEventListener("unhandledrejection",(e=>(t("error","at App.vue:340","ç´§æ€¥å¤„ç†å™¨æ•è·åˆ°æœªå¤„ç†çš„Promiseå¼‚å¸¸:",e.reason),this.checkAndUnlockUI(),e.preventDefault(),!0))))},checkAndUnlockUI(){try{const o=getCurrentPages(),a=o[o.length-1];if(t("log","at App.vue:355","å½“å‰é¡µé¢è·¯å¾„:",a?a.route:"æœªçŸ¥é¡µé¢"),a&&a.route){if(t("log","at App.vue:359","æ£€æŸ¥é¡µé¢æ˜¯å¦å­˜åœ¨é”™è¯¯å¼¹çª—"),a.$vm){if(a.$vm.showError){if(t("log","at App.vue:364","æ£€æµ‹åˆ°é”™è¯¯å¼¹çª—å¤„äºæ˜¾ç¤ºçŠ¶æ€ï¼Œå°è¯•å…³é—­"),a.$vm.showError=!1,"function"==typeof a.$vm.loadData)try{a.$vm.loadData()}catch(e){t("error","at App.vue:372","é‡æ–°åŠ è½½æ•°æ®å¤±è´¥:",e)}uni.showToast({title:"å·²è‡ªåŠ¨æ¢å¤é¡µé¢",icon:"none",duration:2e3})}if(a.$vm.wordList&&0===a.$vm.wordList.length&&a.$vm.showError&&a.$vm.mockWords){t("log","at App.vue:389","æ£€æµ‹åˆ°é¡µé¢é”™è¯¯çŠ¶æ€ï¼Œå°è¯•æ¢å¤åŸºæœ¬åŠŸèƒ½");const e=uni.getStorageSync("reciter_words");e&&"[]"===e?t("log","at App.vue:393","ç”¨æˆ·å·²æ¸…ç©ºæ•°æ®ï¼Œä¸è‡ªåŠ¨æ¢å¤"):a.$vm.wordList=[...a.$vm.mockWords]}}a.route.includes("wordlist")&&(t("log","at App.vue:402","å¯¹å•è¯åˆ—è¡¨é¡µé¢è¿›è¡Œç‰¹æ®Šå¤„ç†"),"function"==typeof uni.startPullDownRefresh&&(uni.startPullDownRefresh(),setTimeout((()=>{uni.stopPullDownRefresh()}),1e3)))}}catch(o){t("error","at App.vue:414","è§£é”UIè¿‡ç¨‹ä¸­å‡ºé”™:",o)}}}};const{app:j,Vuex:$,Pinia:M}=function(){const t=e.createVueApp(I);return t.component("loading-error",T),{app:t}}();uni.Vuex=$,uni.Pinia=M,j.provide("__globalStyles",__uniConfig.styles),j._component.mpType="app",j._component.render=()=>{},j.mount("#app")}(Vue);
